<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <script data-ad-client="ca-pub-2488174175014870" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <!-- google ad -->
    <meta name="google-site-verification" content="40lMg4eqLLbXoDcpN3h-cEnfmselbQ8tUzNvuC0IRIs" /><!-- google 站点认证 -->
    <meta name="baidu-site-verification" content="093lY4ziMu" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="description" content="A hexo theme">
    <meta name="keyword"  content="hexo, hexo-theme-lp">
    <link rel="shortcut icon" href="/img/ironman-draw.png">
    <!-- Place this tag in your head or just before your close body tag. -->
    <script async defer src="https://buttons.github.io/buttons.js"></script>
    <!--<link href='http://fonts.googleapis.com/css?family=Montserrat:400,700' rel='stylesheet' type='text/css'>-->
    <title>
        
          Django REST framework + drf_yasg 生成swaggers在线API文档 - Hexo-theme-lp
        
    </title>

    <link rel="canonical" href="https://flepeng.github.io/2021/08/18/lepeng-python-Django-REST-framework-Django-REST-framework-drf-yasg-生成swaggers在线API文档/">

    <!-- Bootstrap Core CSS -->
    
<link rel="stylesheet" href="/css/bootstrap.min.css">


    <!-- Custom CSS --> 
    
        
<link rel="stylesheet" href="/css/dusign-light.css">

        
<link rel="stylesheet" href="/css/dusign-common-light.css">

        
<link rel="stylesheet" href="/css/font-awesome.css">

        
<link rel="stylesheet" href="/css/toc.css">

        <!-- background effects end -->
    
    
    <!-- Pygments Highlight CSS -->
    
<link rel="stylesheet" href="/css/highlight.css">


    
<link rel="stylesheet" href="/css/widget.css">


    
<link rel="stylesheet" href="/css/rocket.css">


    
<link rel="stylesheet" href="/css/signature.css">


    
<link rel="stylesheet" href="/css/fonts.googleapis.css">


    <link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.3.0/css/font-awesome.min.css">

    <!-- photography -->
    
<link rel="stylesheet" href="/css/photography.css">


    <!-- ga & ba script hoook -->
    <script></script>
<meta name="generator" content="Hexo 4.2.1"></head>


<!-- hack iOS CSS :active style -->
<body ontouchstart="">

    <!-- background effects start -->
    
    <!-- background effects end -->

	<!-- Post Header -->
<style type="text/css">
    header.intro-header{
        
            
                background-image: linear-gradient(rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.3)), url('/img/header_img/archive-bg.jpg')
                /*post*/
            
        
    }
    
    #signature{
        background-image: url('/img/signature/dusign.png');
    }
    
</style>

<header class="intro-header" >
    <!-- Signature -->
    <div id="signature">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                
                    <div class="post-heading">
                        <div class="tags">
                            
                              <a class="tag" href="/tags/#Python" title="Python">Python</a>
                            
                              <a class="tag" href="/tags/#Django" title="Django">Django</a>
                            
                              <a class="tag" href="/tags/#DRF" title="DRF">DRF</a>
                            
                        </div>
                        <h1>Django REST framework + drf_yasg 生成swaggers在线API文档</h1>
                        <h2 class="subheading"></h2>
                        <span class="meta">
                            Posted by Lepeng on
                            2021-08-18
                        </span>

                        
                            <div class="blank_box"></div>
                            <span class="meta">
                                Words <span class="post-count">2k</span> and
                                Reading Time <span class="post-count">11</span> Minutes
                            </span>
                            <div class="blank_box"></div>
                            <!-- 不蒜子统计 start -->
                            <span class="meta">
                                Viewed <span id="busuanzi_value_page_pv"><i class="fa fa-spinner fa-spin"></i></span> Times
                            </span>
                            <!-- 不蒜子统计 end -->
                        

                    </div>
                

                </div>
            </div>
        </div>      
    </div>

    
    <div class="waveWrapper">
        <div class="wave wave_before" style="background-image: url('/img/wave-light.png')"></div>
        <div class="wave wave_after" style="background-image: url('/img/wave-light.png')"></div>
    </div>
    
</header>

	
    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Lepeng</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <!-- Known Issue, found by Hux:
            <nav>'s height woule be hold on by its content.
            so, when navbar scale out, the <nav> will cover tags.
            also mask any touch event of tags, unfortunately.
        -->
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">Home</a>
                    </li>

                    

                        
                    

                        
                    

                        
                        <li>
                            <a href="/about/">About</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/categories/">Categories</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/archive/">Archives</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/tags/">Tags</a>
                        </li>
                        
                    
                    
                    
                    <li>
                        <a href="http://flepeng.com" target="_blank">chinese_blog</a>
                    </li>
                    
                </ul>
            </div>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>
<script>
    // Drop Bootstarp low-performance Navbar
    // Use customize navbar with high-quality material design animation
    // in high-perf jank-free CSS3 implementation
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e){
        if ($navbar.className.indexOf('in') > 0) {
        // CLOSE
            $navbar.className = " ";
            // wait until animation end.
            setTimeout(function(){
                // prevent frequently toggle
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        }else{
        // OPEN
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>


    <!-- Main Content -->
    <!-- Post Content -->
<article>
    <div class="container">
        <div class="row">

            <!-- Post Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                post-container">

                <h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install drf-yasg</span><br></pre></td></tr></table></figure>
<h2 id="第一步：新建一个Django项目"><a href="#第一步：新建一个Django项目" class="headerlink" title="第一步：新建一个Django项目"></a>第一步：新建一个Django项目</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">django-admin.py startproject DjangoDrfTest</span><br></pre></td></tr></table></figure>
<h2 id="第二步：新建一个APP"><a href="#第二步：新建一个APP" class="headerlink" title="第二步：新建一个APP"></a>第二步：新建一个APP</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python manage.py startapp news</span><br></pre></td></tr></table></figure>
<h2 id="第三步：修改settings-py"><a href="#第三步：修改settings-py" class="headerlink" title="第三步：修改settings.py"></a>第三步：修改settings.py</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">INSTALLED_APPS &#x3D; [</span><br><span class="line">    &#39;django.contrib.admin&#39;,</span><br><span class="line">    &#39;django.contrib.auth&#39;,</span><br><span class="line">    &#39;django.contrib.contenttypes&#39;,</span><br><span class="line">    &#39;django.contrib.sessions&#39;,</span><br><span class="line">    &#39;django.contrib.messages&#39;,</span><br><span class="line">    &#39;django.contrib.staticfiles&#39;,</span><br><span class="line">    &#39;rest_framework&#39;,</span><br><span class="line">    &quot;drf_yasg&quot;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">SWAGGER_SETTINGS &#x3D; &#123;</span><br><span class="line">    &#39;LOGIN_URL&#39;: &#39;&#x2F;admin&#x2F;login&#39;,</span><br><span class="line">    &#39;LOGOUT_URL&#39;: &#39;&#x2F;admin&#x2F;logout&#39;,</span><br><span class="line">    &#39;PERSIST_AUTH&#39;: True,</span><br><span class="line">    &#39;REFETCH_SCHEMA_WITH_AUTH&#39;: True,</span><br><span class="line">    &#39;REFETCH_SCHEMA_ON_LOGOUT&#39;: True,</span><br><span class="line"></span><br><span class="line">    &#39;DEFAULT_INFO&#39;: &#39;DjangoDrfTest.urls.swagger_info&#39;,  # 描述信息</span><br><span class="line"></span><br><span class="line">    &#39;SECURITY_DEFINITIONS&#39;: &#123;</span><br><span class="line">        &#39;Basic&#39;: &#123;</span><br><span class="line">            &#39;type&#39;: &#39;basic&#39;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#39;Bearer&#39;: &#123;</span><br><span class="line">            &#39;type&#39;: &#39;apiKey&#39;,</span><br><span class="line">            &#39;name&#39;: &#39;authorization&#39;,</span><br><span class="line">            &#39;in&#39;: &#39;header&#39;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#39;Query&#39;: &#123;</span><br><span class="line">            &#39;type&#39;: &#39;apiKey&#39;,</span><br><span class="line">            &#39;name&#39;: &#39;auth&#39;,</span><br><span class="line">            &#39;in&#39;: &#39;query&#39;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="第四步：修改news-下修改views-py"><a href="#第四步：修改news-下修改views-py" class="headerlink" title="第四步：修改news/下修改views.py"></a>第四步：修改news/下修改views.py</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line">import sys</span><br><span class="line"></span><br><span class="line">reload(sys)</span><br><span class="line">sys.setdefaultencoding(&quot;utf8&quot;)</span><br><span class="line">sys.path.append(&#39;..&#x2F;&#39;)</span><br><span class="line"># from __future__ import unicode_literals</span><br><span class="line">from django.shortcuts import render</span><br><span class="line">from drf_yasg.utils import swagger_auto_schema</span><br><span class="line">from drf_yasg import openapi</span><br><span class="line">from rest_framework.views import APIView</span><br><span class="line">import json</span><br><span class="line">from django.http import JsonResponse</span><br><span class="line">from pymongo import MongoClient</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def get_request_args(func):</span><br><span class="line">    return &#123;&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class GetOneNews(APIView):</span><br><span class="line">    test_param &#x3D; openapi.Parameter(&quot;id&quot;, openapi.IN_QUERY, description&#x3D;&quot;test manual param&quot;,</span><br><span class="line">                                   type&#x3D;openapi.TYPE_INTEGER)</span><br><span class="line"></span><br><span class="line">    @swagger_auto_schema(operation_description&#x3D;&quot;partial_update description override&quot;,</span><br><span class="line">                         responses&#x3D;&#123;404: &#39;id not found&#39;&#125;,</span><br><span class="line">                         manual_parameters&#x3D;[test_param])</span><br><span class="line">    @get_request_args</span><br><span class="line">    def get(self, request, args):</span><br><span class="line">        return JsonResponse(&#123;&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    @swagger_auto_schema(</span><br><span class="line">        operation_description&#x3D;&quot;apiview post description override&quot;,</span><br><span class="line">        request_body&#x3D;openapi.Schema(</span><br><span class="line">            type&#x3D;openapi.TYPE_OBJECT,</span><br><span class="line">            required&#x3D;[&#39;id&#39;, &quot;user_name&quot;],</span><br><span class="line">            properties&#x3D;&#123;</span><br><span class="line">                &#39;id&#39;: openapi.Schema(type&#x3D;openapi.TYPE_INTEGER),</span><br><span class="line">                &#39;user_name&#39;: openapi.Schema(type&#x3D;openapi.TYPE_STRING)</span><br><span class="line">            &#125;,</span><br><span class="line">        ),</span><br><span class="line">        security&#x3D;[]</span><br><span class="line">    )</span><br><span class="line">    @get_request_args</span><br><span class="line">    def post(self, request, args):</span><br><span class="line">        return JsonResponse(&#123;&#125;)</span><br></pre></td></tr></table></figure>
<p><strong>@swagger_auto_schema 装饰器要放在所有装饰器的首位</strong></p>
<h2 id="第五步：news-下新建urls-py并添加以下内容"><a href="#第五步：news-下新建urls-py并添加以下内容" class="headerlink" title="第五步：news/下新建urls.py并添加以下内容"></a>第五步：news/下新建urls.py并添加以下内容</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">import sys</span><br><span class="line"></span><br><span class="line">reload(sys)</span><br><span class="line">sys.setdefaultencoding(&#39;utf-8&#39;)</span><br><span class="line">sys.path.append(&#39;..&#x2F;&#39;)</span><br><span class="line">from django.conf.urls import url</span><br><span class="line">from views import *</span><br><span class="line"></span><br><span class="line">urlpatterns &#x3D; [</span><br><span class="line">    url(r&#39;^getOneNews&#x2F;?$&#39;, GetOneNews.as_view(), name&#x3D;&#39;get_one_news&#39;), </span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<h2 id="第六步：修改DjangoDrfTest-urls-py"><a href="#第六步：修改DjangoDrfTest-urls-py" class="headerlink" title="第六步：修改DjangoDrfTest/urls.py"></a>第六步：修改DjangoDrfTest/urls.py</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">import user_agents</span><br><span class="line">from django.conf.urls import include, url</span><br><span class="line">from django.contrib import admin</span><br><span class="line">from django.shortcuts import redirect</span><br><span class="line">from rest_framework import permissions</span><br><span class="line">from drf_yasg import openapi</span><br><span class="line">from drf_yasg.views import get_schema_view</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">swagger_info &#x3D; openapi.Info(</span><br><span class="line">    title&#x3D;&quot;Snippets API&quot;,</span><br><span class="line">    default_version&#x3D;&#39;v1&#39;,</span><br><span class="line">    description&#x3D;&quot;&quot;&quot;This is a demo project for the [drf-yasg](https:&#x2F;&#x2F;github.com&#x2F;axnsan12&#x2F;drf-yasg) Django Rest Framework library.</span><br><span class="line"></span><br><span class="line">            The &#96;swagger-ui&#96; view can be found [here](&#x2F;cached&#x2F;swagger).  </span><br><span class="line">            The &#96;ReDoc&#96; view can be found [here](&#x2F;cached&#x2F;redoc).  </span><br><span class="line">            The swagger YAML document can be found [here](&#x2F;cached&#x2F;swagger.yaml).  </span><br><span class="line">            </span><br><span class="line">            You can log in using the pre-existing &#96;admin&#96; user with password &#96;passwordadmin&#96;.&quot;&quot;&quot;,  # noqa</span><br><span class="line">    </span><br><span class="line">    terms_of_service&#x3D;&quot;https:&#x2F;&#x2F;www.google.com&#x2F;policies&#x2F;terms&#x2F;&quot;,</span><br><span class="line">    contact&#x3D;openapi.Contact(email&#x3D;&quot;contact@snippets.local&quot;),</span><br><span class="line">    license&#x3D;openapi.License(name&#x3D;&quot;BSD License&quot;),</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">SchemaView &#x3D; get_schema_view(</span><br><span class="line">    info &#x3D; swagger_info,</span><br><span class="line">    validators&#x3D;[&#39;ssv&#39;, &#39;flex&#39;],</span><br><span class="line">    public&#x3D;True,</span><br><span class="line">    permission_classes&#x3D;(permissions.AllowAny,),</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def root_redirect(request):</span><br><span class="line">    user_agent_string &#x3D; request.META.get(&#39;HTTP_USER_AGENT&#39;, &#39;&#39;)</span><br><span class="line">    user_agent &#x3D; user_agents.parse(user_agent_string)</span><br><span class="line"></span><br><span class="line">    if user_agent.is_mobile:</span><br><span class="line">        schema_view &#x3D; &#39;cschema-redoc&#39;</span><br><span class="line">    else:</span><br><span class="line">        schema_view &#x3D; &#39;cschema-swagger-ui&#39;</span><br><span class="line"></span><br><span class="line">    return redirect(schema_view, permanent&#x3D;True)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">urlpatterns &#x3D; [</span><br><span class="line">    url(r&#39;^admin&#x2F;&#39;, admin.site.urls),</span><br><span class="line">    url(r&#39;^swagger(?P&lt;format&gt;.json|.yaml)$&#39;, SchemaView.without_ui(cache_timeout&#x3D;0), name&#x3D;&#39;schema-json&#39;),</span><br><span class="line">    url(r&#39;^swagger&#x2F;$&#39;, SchemaView.with_ui(&#39;swagger&#39;, cache_timeout&#x3D;0), name&#x3D;&#39;schema-swagger-ui&#39;),</span><br><span class="line">    url(r&#39;^redoc&#x2F;$&#39;, SchemaView.with_ui(&#39;redoc&#39;, cache_timeout&#x3D;0), name&#x3D;&#39;schema-redoc&#39;),</span><br><span class="line">    url(r&#39;^redoc-old&#x2F;$&#39;, SchemaView.with_ui(&#39;redoc-old&#39;, cache_timeout&#x3D;0), name&#x3D;&#39;schema-redoc-old&#39;),</span><br><span class="line"></span><br><span class="line">    url(r&#39;^cached&#x2F;swagger(?P&lt;format&gt;.json|.yaml)$&#39;, SchemaView.without_ui(cache_timeout&#x3D;None), name&#x3D;&#39;cschema-json&#39;),</span><br><span class="line">    url(r&#39;^cached&#x2F;swagger&#x2F;$&#39;, SchemaView.with_ui(&#39;swagger&#39;, cache_timeout&#x3D;None), name&#x3D;&#39;cschema-swagger-ui&#39;),</span><br><span class="line">    url(r&#39;^cached&#x2F;redoc&#x2F;$&#39;, SchemaView.with_ui(&#39;redoc&#39;, cache_timeout&#x3D;None), name&#x3D;&#39;cschema-redoc&#39;),</span><br><span class="line">    url(r&#39;^$&#39;, root_redirect),</span><br><span class="line">    url(r&#39;^news&#x2F;&#39;, include(&#39;news.urls&#39;, namespace&#x3D;&quot;crawl_config&quot;)),</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<h2 id="第七步：运行managy-py"><a href="#第七步：运行managy-py" class="headerlink" title="第七步：运行managy.py"></a>第七步：运行managy.py</h2><ul>
<li>python manage.py runserver</li>
<li>访问 <a href="http://127.0.0.1:8000" target="_blank" rel="noopener">http://127.0.0.1:8000</a></li>
</ul>
<p><strong>API通过header apiKey验证或者apiKey在query中，变量的配置位置在settings.py中SWAGGER_SETTINGS配置项中</strong></p>
<h2 id="get-schema-view-参数："><a href="#get-schema-view-参数：" class="headerlink" title="get_schema_view 参数："></a>get_schema_view 参数：</h2><ul>
<li>info - Swagger API Info对象; 如果省略，则默认为DEFAULT_INFO</li>
<li>url - API基本网址; 如果留空，则将从提供视图的位置推断出</li>
<li>patterns - 传递给SchemaGenerator</li>
<li>urlconf - 传递给SchemaGenerator</li>
<li>public - 如果为False，则仅包括当前用户有权访问的端点</li>
<li>validators - 要在生成的模式上应用的验证器名称列表; 允许的值是flex，ssv</li>
<li>generator_class - 要使用的模式生成器类; 应该是的子类OpenAPISchemaGenerator</li>
<li>authentication_classes - 架构视图本身的身份验证类</li>
<li>permission_classes - 架构视图本身的权限类</li>
</ul>
<h3 id="get-schema-view-方法"><a href="#get-schema-view-方法" class="headerlink" title="get_schema_view 方法:"></a>get_schema_view 方法:</h3><ul>
<li>SchemaView.with_ui(renderer, cache_timeout, cache_kwargs) - 使用指定的UI渲染器获取视图实例; 之一swagger，redoc</li>
<li>SchemaView.without_ui(cache_timeout, cache_kwargs) - 获取没有UI渲染器的视图实例; 一样as_cached_view没有kwargs</li>
<li>SchemaView.as_cached_view(cache_timeout, cache_kwargs, **initkwargs)- as_view与之相同，但具有可选的缓存</li>
<li>当然，也可以使用 as_view</li>
<li>所有前3个方法都有两个可选参数，cache_timeout并且cache_kwargs; 如果存在，这些将传递给Django的cached_page装饰器，以便在结果视图上启用缓存。请参阅(<a href="http://drf-yasg.readthedocs.io/en/stable/readme.html#caching)。" target="_blank" rel="noopener">http://drf-yasg.readthedocs.io/en/stable/readme.html#caching)。</a></li>
</ul>
<h2 id="前端显示"><a href="#前端显示" class="headerlink" title="前端显示"></a>前端显示</h2><p>swagger的网页资源是和python包放置在一起。</p>
<p>在服务器上部署时，找到不到静态资源位置的。</p>
<p>所以要讲python 包下这个static文件夹复制到工程的根目录下，就可以看到前端啦</p>
<h2 id="drf-yasg-utils-swagger-auto-schema"><a href="#drf-yasg-utils-swagger-auto-schema" class="headerlink" title="drf_yasg.utils.swagger_auto_schema"></a>drf_yasg.utils.swagger_auto_schema</h2><p><a href="https://drf-yasg.readthedocs.io/en/stable/drf_yasg.html#drf_yasg.utils.swagger_auto_schema" target="_blank" rel="noopener">官网链接</a></p>
<p>drf_yasg.utils.swagger_auto_schema(<br>    method=None, methods=None, auto_schema=<class 'drf_yasg.utils.unset'>, request_body=None, query_serializer=None, manual_parameters=None, operation_id=None, operation_description=None, operation_summary=None, security=None, deprecated=None, responses=None, field_inspectors=None, filter_inspectors=None, paginator_inspectors=None, tags=None, **extra_overrides)</p>
<ul>
<li><p>method (str) – for multi-method views, the http method the options should apply to</p>
</li>
<li><p>methods (list[str]) – for multi-method views, the http methods the options should apply to</p>
</li>
<li><p>auto_schema (drf_yasg.inspectors.SwaggerAutoSchema) – custom class to use for generating the Operation object; this overrides both the class-level swagger_schema attribute and the DEFAULT_AUTO_SCHEMA_CLASS setting, and can be set to None to prevent this operation from being generated</p>
</li>
<li><p>request_body (drf_yasg.openapi.Schema or drf_yasg.openapi.SchemaRef or rest_framework.serializers.Serializer or type[no_body]) – custom request body which will be used as the schema property of a Parameter with in: ‘body’.<br>  A Schema or SchemaRef is not valid if this request consumes form-data, because form and body parameters are mutually exclusive in an Operation. If you need to set custom form parameters, you can use the manual_parameters argument.<br>  If a Serializer class or instance is given, it will be automatically converted into a Schema used as a body Parameter, or into a list of form Parameters, as appropriate.</p>
</li>
<li><p>query_serializer (rest_framework.serializers.Serializer) – if you use a Serializer to parse query parameters, you can pass it here and have Parameter objects be generated automatically from it.<br>  If any Field on the serializer cannot be represented as a query Parameter (e.g. nested Serializers, file fields, …), the schema generation will fail with an error.<br>  Schema generation will also fail if the name of any Field on the query_serializer conflicts with parameters generated by filter_backends or paginator.</p>
</li>
<li><p>manual_parameters (list[drf_yasg.openapi.Parameter]) – a list of manual parameters to override the automatically generated ones Parameters are identified by their (name, in) combination, and any parameters given here will fully override automatically generated parameters if they collide.<br>  It is an error to supply form parameters when the request does not consume form-data.</p>
</li>
<li><p>operation_id (str) – operation ID override; the operation ID must be unique across the whole API</p>
</li>
<li><p>operation_description (str) – operation description override</p>
</li>
<li><p>operation_summary (str) – operation summary string</p>
</li>
<li><p>security (list[dict]) – security requirements override; used to specify which authentication mechanism is required to call this API; an empty list marks the endpoint as unauthenticated (i.e. removes all accepted authentication schemes), and None will inherit the top-level security requirements</p>
</li>
<li><p>deprecated (bool) – deprecation status for operation</p>
</li>
<li><p>responses (dict[int or str, (drf_yasg.openapi.Schema or drf_yasg.openapi.SchemaRef or drf_yasg.openapi.Response or str or rest_framework.serializers.Serializer)]) – a dict of documented manual responses keyed on response status code. If no success (2xx) response is given, one will automatically be generated from the request body and http method. If any 2xx response is given the automatic response is suppressed.</p>
<ul>
<li>if a plain string is given as value, a Response with no body and that string as its description will be generated</li>
<li>if None is given as a value, the response is ignored; this is mainly useful for disabling default 2xx responses, i.e. responses={200: None, 302: ‘something’}</li>
<li>if a Schema, SchemaRef is given, a Response with the schema as its body and an empty description will be generated</li>
<li>a Serializer class or instance will be converted into a Schema and treated as above</li>
<li>a Response object will be used as-is; however if its schema attribute is a Serializer, it will automatically be converted into a Schema</li>
</ul>
</li>
<li><p>field_inspectors (list[type[drf_yasg.inspectors.FieldInspector]]) – extra serializer and field inspectors; these will be tried before ViewInspector.field_inspectors on the inspectors.SwaggerAutoSchema</p>
</li>
<li><p>filter_inspectors (list[type[drf_yasg.inspectors.FilterInspector]]) – extra filter inspectors; these will be tried before ViewInspector.filter_inspectors on the inspectors.SwaggerAutoSchema</p>
</li>
<li><p>paginator_inspectors (list[type[drf_yasg.inspectors.PaginatorInspector]]) – extra paginator inspectors; these will be tried before ViewInspector.paginator_inspectors on the inspectors.SwaggerAutoSchema</p>
</li>
<li><p>tags (list[str]) – tags override</p>
</li>
<li><p>extra_overrides – extra values that will be saved into the overrides dict; these values will be available in the handling inspectors.SwaggerAutoSchema instance via self.overrides</p>
</li>
</ul>
<h2 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h2><ul>
<li><a href="https://blog.csdn.net/lmz_lmz/article/details/81028715" target="_blank" rel="noopener">drf-yasg 之@swagger_auto_schema装饰器的用法</a></li>
<li><a href="https://blog.csdn.net/weixin_31449201/article/details/81109128" target="_blank" rel="noopener">DRF视图的详细用法</a></li>
<li><a href="https://github.com/axnsan12/drf-yasg" target="_blank" rel="noopener">https://github.com/axnsan12/drf-yasg</a></li>
<li><a href="https://drf-yasg.readthedocs.io/en/stable/readme.html" target="_blank" rel="noopener">https://drf-yasg.readthedocs.io/en/stable/readme.html</a></li>
<li><a href="https://blog.csdn.net/u012328712/article/details/84307658" target="_blank" rel="noopener">Django+rest_framework+drf_yasg 生成swaggers在线API文档</a></li>
<li><a href="https://blog.csdn.net/lmz_lmz/article/details/80986106" target="_blank" rel="noopener">drf-yasg 用法</a></li>
</ul>

                
                <hr>
                <!-- Pager -->
                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/2021/08/18/lepeng-python-Django-REST-framework-Django-REST-framework-介绍/" data-toggle="tooltip" data-placement="top" title="Django REST framework 介绍">&larr; Previous Post</a>
                    </li>
                    
                    
                    <li class="next">
                        <a href="/2021/08/18/lepeng-python-Django-REST-framework-Django-REST-framework-序列化/" data-toggle="tooltip" data-placement="top" title="Django REST framework 序列化">Next Post &rarr;</a>
                    </li>
                    
                </ul>

                <!-- tip start -->
                

                
                <div class="comment_notes">
                    <p>
                        study well and make progress every day; study well and progress every day; study hard and make progress every day.
                    </p>
                </div>
                
                <!-- tip end -->

                <!-- Music start-->
                
                <!-- Music end -->

                <!-- Sharing -->
                
                <div class="social-share"  data-wechat-qrcode-helper="" align="center"></div>
                <!--  css & js -->
                <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/css/share.min.css">
                <script src="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script>
                
                <!-- Sharing -->

                <!-- gitment start -->
                
                <!-- gitment end -->

                <!-- 来必力City版安装代码 -->
                
                <!-- City版安装代码已完成 -->

                <!-- disqus comment start -->
                
                <!-- disqus comment end -->
            </div>
            
            <!-- Tabe of Content -->
            <!-- Table of Contents -->

    
      
        <aside id="sidebar">
          <div id="toc" class="toc-article">
          <strong class="toc-title">Contents</strong>
          
            
              <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#安装"><span class="toc-nav-number">1.</span> <span class="toc-nav-text">安装</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#第一步：新建一个Django项目"><span class="toc-nav-number">2.</span> <span class="toc-nav-text">第一步：新建一个Django项目</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#第二步：新建一个APP"><span class="toc-nav-number">3.</span> <span class="toc-nav-text">第二步：新建一个APP</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#第三步：修改settings-py"><span class="toc-nav-number">4.</span> <span class="toc-nav-text">第三步：修改settings.py</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#第四步：修改news-下修改views-py"><span class="toc-nav-number">5.</span> <span class="toc-nav-text">第四步：修改news&#x2F;下修改views.py</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#第五步：news-下新建urls-py并添加以下内容"><span class="toc-nav-number">6.</span> <span class="toc-nav-text">第五步：news&#x2F;下新建urls.py并添加以下内容</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#第六步：修改DjangoDrfTest-urls-py"><span class="toc-nav-number">7.</span> <span class="toc-nav-text">第六步：修改DjangoDrfTest&#x2F;urls.py</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#第七步：运行managy-py"><span class="toc-nav-number">8.</span> <span class="toc-nav-text">第七步：运行managy.py</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#get-schema-view-参数："><span class="toc-nav-number">9.</span> <span class="toc-nav-text">get_schema_view 参数：</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#get-schema-view-方法"><span class="toc-nav-number">9.1.</span> <span class="toc-nav-text">get_schema_view 方法:</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#前端显示"><span class="toc-nav-number">10.</span> <span class="toc-nav-text">前端显示</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#drf-yasg-utils-swagger-auto-schema"><span class="toc-nav-number">11.</span> <span class="toc-nav-text">drf_yasg.utils.swagger_auto_schema</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#参考文章"><span class="toc-nav-number">12.</span> <span class="toc-nav-text">参考文章</span></a></li></ol>
            
          
          </div>
        </aside>
      
    

                
            <!-- Sidebar Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                sidebar-container">

                <!-- Featured Tags -->
                
                <section>
                    <!-- no hr -->
                    <h5><a href="/tags/">FEATURED TAGS</a></h5>
                    <div class="tags">
                       
                          <a class="tag" href="/tags/#Python" title="Python">Python</a>
                        
                          <a class="tag" href="/tags/#Django" title="Django">Django</a>
                        
                          <a class="tag" href="/tags/#DRF" title="DRF">DRF</a>
                        
                    </div>
                </section>
                

                <!-- Friends Blog -->
                
                <hr>
                <h5>FRIENDS</h5>
                <ul class="list-inline">

                    
                        <li><a href="https://blog.csdn.net/fenglepeng" target="_blank">Feng Lepeng&#39;s CSDN</a></li>
                    
                </ul>
                
            </div>
        </div>
    </div>
</article>




<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>
<!-- anchor-js, Doc:http://bryanbraun.github.io/anchorjs/ -->
<script>
    async("https://cdn.bootcss.com/anchor-js/1.1.1/anchor.min.js",function(){
        anchors.options = {
          visible: 'hover',
          placement: 'left',
          icon: 'ℬ'
        };
        anchors.add().remove('.intro-header h1').remove('.subheading').remove('.sidebar-container h5');
    })
</script>


<style  type="text/css">
    /* place left on bigger screen */
    @media all and (min-width: 800px) {
        .anchorjs-link{
            position: absolute;
            left: -0.75em;
            font-size: 1.1em;
            margin-top : -0.1em;
        }
    }
</style>



    <!-- Footer -->
    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">

                

                

                

                

                

                

                

                </ul>
                <p class="copyright text-muted">
                    Copyright &copy;
                    <a href="https://beian.miit.gov.cn/" target="_blank" rel="noopener">京ICP备18055501号-2</a>;
                    Feng Lepeng 2021
                    <br>
                    Powered by 
                    <a href="https://github.com/dusign/hexo-theme-snail" target="_blank" rel="noopener">
                        <i>hexo-theme-snail</i>
                    </a> | 
                    <iframe name="star" style="margin-left: 2px; margin-bottom:-5px;" frameborder="0" scrolling="0"
                        width="100px" height="20px"
                        src="https://ghbtns.com/github-btn.html?user=flepeng&repo=hexo-theme-lp&type=star">
                    </iframe>
                </p>
            </div>
        </div>
    </div>

</footer>

<!-- jQuery -->

<script src="/js/jquery.min.js"></script>


<!-- Bootstrap Core JavaScript -->

<script src="/js/bootstrap.min.js"></script>


<!-- Custom Theme JavaScript -->

<script src="/js/hux-blog.min.js"></script>


<!-- Search -->

<script src="/js/search.js"></script>


<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>


<!-- jquery.tagcloud.js -->
<script>
    // only load tagcloud.js in tag.html
    if($('#tag_cloud').length !== 0){
        async("https://flepeng.github.io/js/jquery.tagcloud.js",function(){
            $.fn.tagcloud.defaults = {
                //size: {start: 1, end: 1, unit: 'em'},
                color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>

<!--fastClick.js -->
<script>
    async("https://cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>


<!-- Google Analytics -->


<script>
    // dynamic User by Hux
    var _gaId = 'UA-XXXXXXXX-X';
    var _gaDomain = 'yoursite';

    // Originial
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', _gaId, _gaDomain);
    ga('send', 'pageview');
</script>




<!-- Baidu Tongji -->


<!-- Search -->

    <script type="text/javascript">      
        var search_path = "search.xml";
        if (search_path.length == 0) {
            search_path = "search.xml";
        }
    var path = "/" + search_path;
    searchFunc(path, 'local-search-input', 'local-search-result');
    </script>


<!-- busuanzi -->
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>






	<a id="rocket" href="#top" class=""></a>
	<script type="text/javascript" src="/js/totop.js?v=1.0.0" async=""></script>
    <script type="text/javascript" src="/js/toc.js?v=1.0.0" async=""></script>

    
        <!-- background effects line -->
        

        
            <script type="text/javascript" src="/js/mouse-click.js" content='[&#34;🌱&#34;,&#34;just do it&#34;,&#34;🍀&#34;]' color='[&#34;rgb(121,93,179)&#34; ,&#34;rgb(76,180,231)&#34; ,&#34;rgb(184,90,154)&#34;]'></script>
        

        <!-- background effects end -->
    

    <!--<script size="50" alpha='0.3' zIndex="-999" src="/js/ribbonStatic.js"></script>-->
    
        <script src="/js/ribbonDynamic.js"></script>
    
</body>

</html>
