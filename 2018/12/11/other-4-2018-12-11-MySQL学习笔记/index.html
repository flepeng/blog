<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <script data-ad-client="ca-pub-2488174175014870" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <!-- google ad -->
    <meta name="google-site-verification" content="40lMg4eqLLbXoDcpN3h-cEnfmselbQ8tUzNvuC0IRIs" /><!-- google 站点认证 -->
    <meta name="baidu-site-verification" content="093lY4ziMu" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="description" content="A hexo theme">
    <meta name="keyword"  content="hexo, hexo-theme-lp">
    <link rel="shortcut icon" href="/img/ironman-draw.png">
    <!-- Place this tag in your head or just before your close body tag. -->
    <script async defer src="https://buttons.github.io/buttons.js"></script>
    <!--<link href='http://fonts.googleapis.com/css?family=Montserrat:400,700' rel='stylesheet' type='text/css'>-->
    <title>
        
          MySQL学习笔记 - Hexo-theme-lp
        
    </title>

    <link rel="canonical" href="https://flepeng.github.io/2018/12/11/other-4-2018-12-11-MySQL学习笔记/">

    <!-- Bootstrap Core CSS -->
    
<link rel="stylesheet" href="/css/bootstrap.min.css">


    <!-- Custom CSS --> 
    
        
<link rel="stylesheet" href="/css/dusign-light.css">

        
<link rel="stylesheet" href="/css/dusign-common-light.css">

        
<link rel="stylesheet" href="/css/font-awesome.css">

        
<link rel="stylesheet" href="/css/toc.css">

        <!-- background effects end -->
    
    
    <!-- Pygments Highlight CSS -->
    
<link rel="stylesheet" href="/css/highlight.css">


    
<link rel="stylesheet" href="/css/widget.css">


    
<link rel="stylesheet" href="/css/rocket.css">


    
<link rel="stylesheet" href="/css/signature.css">


    
<link rel="stylesheet" href="/css/fonts.googleapis.css">


    <link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.3.0/css/font-awesome.min.css">

    <!-- photography -->
    
<link rel="stylesheet" href="/css/photography.css">


    <!-- ga & ba script hoook -->
    <script></script>
<meta name="generator" content="Hexo 4.2.1"></head>


<!-- hack iOS CSS :active style -->
<body ontouchstart="">

    <!-- background effects start -->
    
    <!-- background effects end -->

	<!-- Post Header -->
<style type="text/css">
    header.intro-header{
        
            
                background-image: linear-gradient(rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.3)), url('/img/post-bg-debug.png')
                /*post*/
            
        
    }
    
    #signature{
        background-image: url('/img/signature/dusign.png');
    }
    
</style>

<header class="intro-header" >
    <!-- Signature -->
    <div id="signature">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                
                    <div class="post-heading">
                        <div class="tags">
                            
                              <a class="tag" href="/tags/#MySQL" title="MySQL">MySQL</a>
                            
                        </div>
                        <h1>MySQL学习笔记</h1>
                        <h2 class="subheading"></h2>
                        <span class="meta">
                            Posted by Lepeng on
                            2018-12-11
                        </span>

                        
                            <div class="blank_box"></div>
                            <span class="meta">
                                Words <span class="post-count">8.7k</span> and
                                Reading Time <span class="post-count">36</span> Minutes
                            </span>
                            <div class="blank_box"></div>
                            <!-- 不蒜子统计 start -->
                            <span class="meta">
                                Viewed <span id="busuanzi_value_page_pv"><i class="fa fa-spinner fa-spin"></i></span> Times
                            </span>
                            <!-- 不蒜子统计 end -->
                        

                    </div>
                

                </div>
            </div>
        </div>      
    </div>

    
    <div class="waveWrapper">
        <div class="wave wave_before" style="background-image: url('/img/wave-light.png')"></div>
        <div class="wave wave_after" style="background-image: url('/img/wave-light.png')"></div>
    </div>
    
</header>

	
    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Lepeng</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <!-- Known Issue, found by Hux:
            <nav>'s height woule be hold on by its content.
            so, when navbar scale out, the <nav> will cover tags.
            also mask any touch event of tags, unfortunately.
        -->
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">Home</a>
                    </li>

                    

                        
                    

                        
                    

                        
                        <li>
                            <a href="/about/">About</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/categories/">Categories</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/archive/">Archives</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/tags/">Tags</a>
                        </li>
                        
                    
                    
                    
                    <li>
                        <a href="http://flepeng.com" target="_blank">chinese_blog</a>
                    </li>
                    
                </ul>
            </div>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>
<script>
    // Drop Bootstarp low-performance Navbar
    // Use customize navbar with high-quality material design animation
    // in high-perf jank-free CSS3 implementation
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e){
        if ($navbar.className.indexOf('in') > 0) {
        // CLOSE
            $navbar.className = " ";
            // wait until animation end.
            setTimeout(function(){
                // prevent frequently toggle
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        }else{
        // OPEN
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>


    <!-- Main Content -->
    <!-- Post Content -->
<article>
    <div class="container">
        <div class="row">

            <!-- Post Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                post-container">

                <h3 id="什么是数据库？"><a href="#什么是数据库？" class="headerlink" title="什么是数据库？"></a>什么是数据库？</h3><ul>
<li>数据库是按照数据结构组织、存储和管理数据库的仓库。</li>
<li>每个数据库都有一个或多个不同的API用于创建、访问、管理、搜索和复制保存的数据。</li>
<li><p>我们使用关系型数据库管理系统来存储和管理大量的数据。所谓关系型数据库，是建立在关系模型上的数据库，借助集合代数等数学概念和方法来处理数据库中的数据。</p>
</li>
<li><p>RDBMS（关系型数据库管理系统）的特点：</p>
<ul>
<li>数据以表格的形式出现</li>
<li>每行为各种记录名称</li>
<li>每列记录名称所对应的数据域</li>
<li>许多的行和列组成一张表单</li>
<li>若干的表单组成database</li>
</ul>
</li>
</ul>
<h3 id="RDBMS术语"><a href="#RDBMS术语" class="headerlink" title="RDBMS术语"></a>RDBMS术语</h3><ul>
<li>数据库：数据库是一些关联表的集合。</li>
<li>数据表：表是数据的矩阵。在一个数据库中的表看起来像一个简单的电子表格。</li>
<li>列：一列（数据元素）包含了相同的数据。</li>
<li>行：一行（=元组，或记录）是一组相关的数据，例如一条用户订阅的数据。</li>
<li>冗余：存储两倍数据，冗余降低了性能，但提高了数据的安全性。</li>
<li>主键：主键是唯一的。一个数据中只能包含一个主键，可以使用主键来查询数据。</li>
<li>外键：外键用于关联两个表。</li>
<li>复合键（组合键）将多个列作为一个索引键，一般用于复合索引。</li>
<li>索引：使用索引可快速访问数据库表中的特定信息。索引是对数据库表中一列或多列的值进行排序的一种结构。类似于书籍的目录。 </li>
<li>参照完整性：参照完整性要求关系中不允许引用不存在的实体。与实体完整性是关系模型必须满足的完整性约束条件，目的是保证数据的一致性。</li>
</ul>
<h3 id="管理MySQL的命令"><a href="#管理MySQL的命令" class="headerlink" title="管理MySQL的命令"></a>管理MySQL的命令</h3><ul>
<li>use database_name;//选中要操作的数据库</li>
<li>show databases;//列出Mysql数据库管理系统的数据库列表</li>
<li>show tables;//显示指定数据库的所有表，使用该命令前需要使用use命令来选中要操作的数据库。</li>
<li>show columns from table_name;//显示表的属性，属性类型，主键信息。是否为NULL，默认值等其他信息。</li>
<li>show index from table_name;//显示数据表的详细索引信息，包括主键。</li>
<li>show table status from database;//显示数据库中所有表信息。</li>
<li>show table status from database like ‘runnoob%’;//# 表名以runoob开头的表的信息</li>
<li>show table status from database like ‘runnoob%’\G;#加上\G，查询结果按列打印</li>
</ul>
<h3 id="MySqL数据库操作"><a href="#MySqL数据库操作" class="headerlink" title="MySqL数据库操作"></a>MySqL数据库操作</h3><ul>
<li>creat database database_name; </li>
<li>drop database database_name;</li>
</ul>
<h3 id="MySQL数据类型"><a href="#MySQL数据类型" class="headerlink" title="MySQL数据类型"></a>MySQL数据类型</h3><h4 id="数值、日期-时间、字符串（字符）类型。"><a href="#数值、日期-时间、字符串（字符）类型。" class="headerlink" title="数值、日期/时间、字符串（字符）类型。"></a>数值、日期/时间、字符串（字符）类型。</h4><ul>
<li>TINYINT  1byte  -128~127  0~255 小整数</li>
<li>SMALLINT  2byte  -32768~32767  0~65535  大整数</li>
<li>MEDIUMINT    3 字节    (-8 388 608，8 388 607)    (0，16 777 215)    大整数值</li>
<li>INT(INTEGER) 4byte  -2147483648~2147483647  0~4294967295  大整数</li>
<li>BIGINT    8 字节    (-9,223,372,036,854,775,808，9 223 372 036 854 775 807)    (0，18 446 744 073 709 551 615)    极大整数值</li>
<li>FLOAT    4 字节    (-3.402 823 466 E+38，-1.175 494 351 E-38)，0，(1.175 494 351 E-38，3.402 823 466 351 E+38)    0，(1.175 494 351 E-38，3.402 823 466 E+38)    单精度/浮点数值</li>
<li>DOUBLE    8 字节    (-1.797 693 134 862 315 7 E+308，-2.225 073 858 507 201 4 E-308)，0，(2.225 073 858 507 201 4 E-308，1.797 693 134 862 315 7 E+308)    0，(2.225 073 858 507 201 4 E-308，1.797 693 134 862 315 7 E+308)    双精度/浮点数值</li>
<li><p>DECIMAL    对DECIMAL(M,D) ，如果M&gt;D，为M+2否则为D+2    依赖于M和D的值    依赖于M和D的值    小数值</p>
<h4 id="时间-时间类型"><a href="#时间-时间类型" class="headerlink" title="时间/时间类型"></a>时间/时间类型</h4></li>
<li>DATE  3byte 1000-01-01/9999-12-31  YYYY-MM-DD  日期值</li>
<li>TIME  3byte     HH:MM:SS   时间值或持续时间</li>
<li>YEAR  1byte  1901/2155  YYYY  年份值</li>
<li>DATETIME  8byte  1000-01-01 00:00:00/9999-12-31 23:59:59  YYYY-MM-DD HH:MM:SS  混合日期和时间值</li>
<li><p>TIMESTAMP  4byte  1970-01-01 00:00:00/2038(结束时间是第 2147483647 秒，北京时间 2038-1-19 11:14:07，格林尼治时间 2038年1月19日 凌晨 03:14:07)  YYYYMMDD HHMMSS  混合日期和时间值，时间戳</p>
<h4 id="字符串类型"><a href="#字符串类型" class="headerlink" title="字符串类型"></a>字符串类型</h4></li>
<li><p>CHAR(定长字符串)  VARCHAR(变长字符串)  TINYBLOB(不超过255个字符的二进制字符串)  TINYTEXT(短文本字符串)等等！</p>
<h4 id="数据类型的属性"><a href="#数据类型的属性" class="headerlink" title="数据类型的属性"></a>数据类型的属性</h4></li>
<li>NULL  数据列可包含NULL值</li>
<li>NOT NULL  数据列不允许包含NULL值</li>
<li>DEFAULT  默认值</li>
<li>PRIMARY KEY  主键</li>
<li>AUTO_INCREMENT  自动递增，适用于整数类型</li>
<li>UNSIGNED  无符号</li>
<li><p>CHARACTERSET  指定一个字符集</p>
<h3 id="mysql表操作"><a href="#mysql表操作" class="headerlink" title="mysql表操作"></a>mysql表操作</h3></li>
<li>创建  creat table table_name(column_name column_type);<ul>
<li>实例：<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> <span class="string">`runoob_tbl`</span>(</span><br><span class="line">   <span class="string">`runoob_id`</span> <span class="built_in">INT</span> <span class="keyword">UNSIGNED</span> AUTO_INCREMENT,</span><br><span class="line">   <span class="string">`runoob_title`</span> <span class="built_in">VARCHAR</span>(<span class="number">100</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">   <span class="string">`runoob_author`</span> <span class="built_in">VARCHAR</span>(<span class="number">40</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">   <span class="string">`submission_date`</span> <span class="built_in">DATE</span>,</span><br><span class="line">   PRIMARY <span class="keyword">KEY</span> ( <span class="string">`runoob_id`</span> ) <span class="comment">#设置主键</span></span><br><span class="line">)<span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8; <span class="comment">#ENGINE:设置存储引擎，CHARSET：设置编码</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li>删除数据表  drop table table_name;</li>
<li>删除表内数据，是使用delete.  delete from table_name where T_name=”zhangsan”;</li>
<li>清除表内数据，保留表结构，用truncate.  truncate table table_name;</li>
<li>插入数据<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> table_name (field1, field2,...fieldN)</span><br><span class="line">           <span class="keyword">VALUES</span></span><br><span class="line">           (value1, value2,... valueN) <span class="comment">#如果数据是字符型，必须使用单引号或者双引号，如："value"。</span></span><br></pre></td></tr></table></figure>
<ul>
<li>实例：<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> table_name  (field1, field2,...fieldN)  </span><br><span class="line">                         <span class="keyword">VALUES</span>  </span><br><span class="line">                   (valueA1,valueA2,...valueAN),(valueB1,valueB2,...valueBN),(valueC1,valueC2,...valueCN)......;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li>查询数据  select</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> column_name,colunm_name</span><br><span class="line"><span class="keyword">from</span> table_name</span><br><span class="line">[<span class="keyword">where</span> clause]</span><br><span class="line">[limt n] [<span class="keyword">offset</span> m]</span><br></pre></td></tr></table></figure>
<ul>
<li>注：查询语句中可以使用一个或者多个表，表之间使用逗号（，）分割，并使用where语句来设定查询条件。</li>
<li>SELECT命令可以读取一条或者多条记录。</li>
<li>可以使用星号（*）来替代其他字段，SELECT语句会返回表的所有字段数据</li>
<li>你可以使用 WHERE 语句来包含任何条件。</li>
<li>你可以使用 LIMIT 属性来设定返回的记录数。</li>
<li>你可以通过OFFSET指定SELECT语句开始查询的数据偏移量。默认情况下偏移量为0。</li>
<li>实例：</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> <span class="keyword">table</span>; <span class="comment">#返回表中所有记录</span></span><br></pre></td></tr></table></figure>
<h3 id="MySQL-where-子句，有条件地从表中选取数据，可将where字句添加到select语句中"><a href="#MySQL-where-子句，有条件地从表中选取数据，可将where字句添加到select语句中" class="headerlink" title="MySQL where 子句，有条件地从表中选取数据，可将where字句添加到select语句中"></a>MySQL where 子句，有条件地从表中选取数据，可将where字句添加到select语句中</h3><ul>
<li>语法：<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> field1, field2, ... fieldN <span class="keyword">from</span> table_name1, table_name2...</span><br><span class="line">[<span class="keyword">where</span> condition1 [<span class="keyword">AND</span> [<span class="keyword">OR</span>]] condition2...</span><br></pre></td></tr></table></figure></li>
<li>注：<ul>
<li>可以查询多个表，表间用,分割，并使用where语句来设定查询条件</li>
<li>使用AND或OR指定一个或多个条件</li>
<li>where子句也可以运用在delete或update命令</li>
<li>WHERE 子句类似于程序语言中的 if 条件，根据 MySQL 表中的字段值来读取指定的数据。</li>
</ul>
</li>
<li>实例：<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> table_name <span class="keyword">where</span> <span class="built_in">BINARY</span> cloumn=<span class="string">'runoob.com'</span>;</span><br><span class="line"><span class="comment"># BINARY用于区分大小写</span></span><br></pre></td></tr></table></figure>
<h3 id="UPDATE-更新"><a href="#UPDATE-更新" class="headerlink" title="UPDATE 更新"></a>UPDATE 更新</h3></li>
<li>语法：<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> table_name <span class="keyword">SET</span> field1=<span class="keyword">new</span>-value1,field2 = <span class="keyword">new</span>-value2</span><br><span class="line">[<span class="keyword">where</span> Clause]</span><br></pre></td></tr></table></figure></li>
<li>注：</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">你可以同时更新一个或多个字段。</span><br><span class="line">你可以在 WHERE 子句中指定任何条件。</span><br><span class="line">你可以在一个单独表中同时更新数据。</span><br></pre></td></tr></table></figure>
<ul>
<li>实例：<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> runoob_tbl <span class="keyword">set</span> runoob_title=<span class="string">'学习 C++'</span> <span class="keyword">where</span> runood_id=<span class="number">3</span>;</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> runoob_tbl <span class="keyword">where</span> runoob_id=<span class="number">3</span>;</span><br><span class="line">return :</span><br><span class="line">| runoob_id | runoob_title | runoob_author | submission_date |</span><br><span class="line">+<span class="comment">-----------+--------------+---------------+-----------------+</span></span><br><span class="line">| 3         | 学习 C++   | RUNOOB.COM    | 2016-05-06      |</span><br></pre></td></tr></table></figure>
<h3 id="Delete-语句"><a href="#Delete-语句" class="headerlink" title="Delete 语句"></a>Delete 语句</h3></li>
<li>delete from table_name [where Clause]</li>
<li>delete 语句用于删除表中的数据, 基本用法为:<ul>
<li>delete from 表名称 where 删除条件;</li>
</ul>
</li>
<li>以下是在表 students 中的实例:</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">删除 id 为 3 的行: <span class="keyword">delete</span> <span class="keyword">from</span> students <span class="keyword">where</span> <span class="keyword">id</span>=<span class="number">3</span>;</span><br><span class="line">删除所有年龄小于 21 岁的数据: <span class="keyword">delete</span> <span class="keyword">from</span> students <span class="keyword">where</span> age&lt;<span class="number">20</span>;</span><br><span class="line">删除表中的所有数据: <span class="keyword">delete</span> <span class="keyword">from</span> students;</span><br></pre></td></tr></table></figure>
<ul>
<li>delete, drop, truncate都有删除表的作用，区别在于：<ul>
<li>delete 和 truncate 仅仅删除表数据，drop 连表数据和表结构一起删除，打个比方，delete 是单杀，truncate 是团灭，drop 是把电脑摔了。</li>
<li>delete 是 DML 语句，操作完以后如果没有不想提交事务还可以回滚，truncate 和 drop 是 DDL 语句，操作完马上生效，不能回滚，打个比方，delete 是发微信说分手，后悔还可以撤回，truncate 和 drop 是直接扇耳光说滚，不能反悔。</li>
<li>执行的速度上，drop&gt;truncate&gt;delete，打个比方，drop 是神舟火箭，truncate 是和谐号动车，delete 是自行车。<h3 id="LIKE-子句"><a href="#LIKE-子句" class="headerlink" title="LIKE 子句"></a>LIKE 子句</h3></li>
</ul>
</li>
<li>使用百分号%字符来表示任意字符，类似于UNIX或者正则表达式中的星号*。</li>
<li>如果没有使用百分号%，LIKE子句与等号=的效果是一样的。</li>
<li><p>实例：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> runoob_tbl <span class="keyword">where</span> runoob_author <span class="keyword">like</span> <span class="string">'%COM'</span>;</span><br><span class="line">return:</span><br><span class="line">+<span class="comment">-----------+---------------+---------------+-----------------+</span></span><br><span class="line">| runoob_id | runoob_title  | runoob_author | submission_date |</span><br><span class="line">+<span class="comment">-----------+---------------+---------------+-----------------+</span></span><br><span class="line">| 3         | 学习 Java   | RUNOOB.COM    | 2015-05-01      |</span><br><span class="line">| 4         | 学习 Python | RUNOOB.COM    | 2016-03-06      |</span><br><span class="line">+<span class="comment">-----------+---------------+---------------+-----------------+</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>like 匹配/模糊匹配，会与% 和_结合使用</p>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">'%a'     //以a结尾的数据</span><br><span class="line">'a%'     //以a开头的数据</span><br><span class="line">'%a%'    //含有a的数据</span><br><span class="line">'_a_'    //三位且中间字母是a的</span><br><span class="line">'_a'     //两位且结尾字母是a的</span><br><span class="line">'a_'     //两位且开头字母是a的</span><br><span class="line">查询以 java 字段开头的信息。</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> <span class="keyword">position</span> <span class="keyword">WHERE</span> <span class="keyword">name</span> <span class="keyword">LIKE</span> <span class="string">'java%'</span>;</span><br><span class="line">查询包含 java 字段的信息。</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> <span class="keyword">position</span> <span class="keyword">WHERE</span> <span class="keyword">name</span> <span class="keyword">LIKE</span> <span class="string">'%java%'</span>;</span><br><span class="line">查询以 java 字段结尾的信息。</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> <span class="keyword">position</span> <span class="keyword">WHERE</span> <span class="keyword">name</span> <span class="keyword">LIKE</span> <span class="string">'%java'</span>;</span><br></pre></td></tr></table></figure>
<ul>
<li>在where like 的条件查询中，SQL提供了四种匹配方式</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">%：表示任意 0 个或多个字符。可匹配任意类型和长度的字符，有些情况下若是中文，请使用两个百分号（%%）表示。</span><br><span class="line">_：表示任意单个字符。匹配单个任意字符，它常用来限制表达式的字符长度语句。</span><br><span class="line">[]：表示括号内所列字符中的一个（类似正则表达式）。指定一个字符、字符串或范围，要求所匹配对象为它们中的任一个。</span><br><span class="line">[^] ：表示不在括号所列之内的单个字符。其取值和 [] 相同，但它要求所匹配对象为指定字符以外的任一个字符。</span><br><span class="line">查询内容包含通配符时,由于通配符的缘故，导致我们查询特殊字符 “%”、“_”、“[” 的语句无法正常实现，而把特殊字符用 “[ ]” 括起便可正常查询。</span><br></pre></td></tr></table></figure>
<h3 id="MySQL-UNION操作符"><a href="#MySQL-UNION操作符" class="headerlink" title="MySQL UNION操作符"></a>MySQL UNION操作符</h3><ul>
<li>描述：<ul>
<li>用于连接两个以上的select语句的结果组合到一个结果集合中。多个select语句会删除重复的数据。</li>
</ul>
</li>
<li>语法：</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> expression1, expression2, ... expression_n //要检索的列</span><br><span class="line"><span class="keyword">FROM</span> <span class="keyword">tables</span>  //要检索的数据表</span><br><span class="line">[<span class="keyword">WHERE</span> conditions]  //可选，检索条件</span><br><span class="line"><span class="keyword">UNION</span> [<span class="keyword">ALL</span> | <span class="keyword">DISTINCT</span>]  //<span class="keyword">DISTINCT</span>：可选，删除结果中重复的数据。 <span class="keyword">ALL</span>: 可选，返回所有结果集，包含重复数据。</span><br><span class="line"><span class="keyword">SELECT</span> expression1, expression2, ... expression_n</span><br><span class="line"><span class="keyword">FROM</span> <span class="keyword">tables</span></span><br><span class="line">[<span class="keyword">WHERE</span> conditions];</span><br></pre></td></tr></table></figure>
<ul>
<li>实例：</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> websites;</span><br><span class="line">+<span class="comment">----+--------------+---------------------------+-------+---------+</span></span><br><span class="line">| id | name         | url                       | alexa | country |</span><br><span class="line">+<span class="comment">----+--------------+---------------------------+-------+---------+</span></span><br><span class="line">| 1  | Google       | https://www.google.cm/    | 1     | USA     |</span><br><span class="line">| 2  | 淘宝          | https://www.taobao.com/   | 13    | CN      |</span><br><span class="line">| 3  | 菜鸟教程      | http://www.runoob.com/    | 4689  | CN      |</span><br><span class="line">| 4  | 微博          | http://weibo.com/         | 20    | CN      |</span><br><span class="line">| 5  | Facebook     | https://www.facebook.com/ | 3     | USA     |</span><br><span class="line">| 7  | stackoverflow | http://stackoverflow.com/ |   0 | IND     |</span><br><span class="line">+<span class="comment">----+---------------+---------------------------+-------+---------+</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> apps;</span><br><span class="line">+<span class="comment">----+------------+-------------------------+---------+</span></span><br><span class="line">| id | app_name   | url                     | country |</span><br><span class="line">+<span class="comment">----+------------+-------------------------+---------+</span></span><br><span class="line">|  1 | QQ APP     | http://im.qq.com/       | CN      |</span><br><span class="line">|  2 | 微博 APP | http://weibo.com/       | CN      |</span><br><span class="line">|  3 | 淘宝 APP | https://www.taobao.com/ | CN      |</span><br><span class="line">+<span class="comment">----+------------+-------------------------+---------+</span></span><br><span class="line">3 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> country <span class="keyword">from</span> websites</span><br><span class="line"><span class="keyword">union</span></span><br><span class="line"><span class="keyword">select</span> country <span class="keyword">from</span> apps</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> country;</span><br><span class="line">+<span class="comment">--------+</span></span><br><span class="line">|country |</span><br><span class="line">+<span class="comment">--------+</span></span><br><span class="line">|CN      | </span><br><span class="line">|IND     |</span><br><span class="line">|USA     |</span><br><span class="line">+<span class="comment">--------+</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> country <span class="keyword">from</span> websites</span><br><span class="line"><span class="keyword">union</span> <span class="keyword">ALL</span></span><br><span class="line"><span class="keyword">select</span> country <span class="keyword">from</span> apps</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> country;</span><br><span class="line">注：将显示所有国家(重复)</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> country, <span class="keyword">name</span> <span class="keyword">from</span> websites</span><br><span class="line"><span class="keyword">where</span> country=<span class="string">'CN'</span></span><br><span class="line"><span class="keyword">UNION</span> <span class="keyword">ALL</span></span><br><span class="line"><span class="keyword">SELECT</span> country, app_name <span class="keyword">from</span> apps</span><br><span class="line"><span class="keyword">where</span> country=<span class="string">'CN'</span></span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> country;</span><br><span class="line">+<span class="comment">-------+------+</span></span><br><span class="line">|country|name  |</span><br><span class="line">+<span class="comment">-------+------+</span></span><br><span class="line">|CN     |淘宝  |</span><br><span class="line">|...    |...   |</span><br><span class="line">+<span class="comment">-------+------+</span></span><br></pre></td></tr></table></figure>
<h3 id="排序-order-by"><a href="#排序-order-by" class="headerlink" title="排序 order by"></a>排序 order by</h3><ul>
<li>select * from table_name order by column_name ASC;//升序</li>
<li>select * from table_name order by column_name DESC;//降序</li>
<li>注：</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">如果字符集采用的是 gbk(汉字编码字符集)，直接在查询语句后边添加 ORDER BY：</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> * </span><br><span class="line"><span class="keyword">FROM</span> runoob_tbl</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> runoob_title;</span><br><span class="line">如果字符集采用的是 utf8(万国码)，需要先对字段进行转码然后排序：</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> * </span><br><span class="line"><span class="keyword">FROM</span> runoob_tbl</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="keyword">CONVERT</span>(runoob_title <span class="keyword">using</span> gbk);</span><br></pre></td></tr></table></figure>
<h3 id="Group-by-根据一个或多个列对结果集进行分组。在分组的列上我们可以使用-COUNT-SUM-AVG-等函数。"><a href="#Group-by-根据一个或多个列对结果集进行分组。在分组的列上我们可以使用-COUNT-SUM-AVG-等函数。" class="headerlink" title="Group by 根据一个或多个列对结果集进行分组。在分组的列上我们可以使用 COUNT, SUM, AVG,等函数。"></a>Group by 根据一个或多个列对结果集进行分组。在分组的列上我们可以使用 COUNT, SUM, AVG,等函数。</h3><ul>
<li>with rollup 可以实现在分组统计数据基础上再进行相同的统计（SUM,AVG,COUNT…）<h3 id="Mysql-连接的使用，作用从多张数据表中读取数据-JOIN"><a href="#Mysql-连接的使用，作用从多张数据表中读取数据-JOIN" class="headerlink" title="Mysql 连接的使用，作用从多张数据表中读取数据 JOIN"></a>Mysql 连接的使用，作用从多张数据表中读取数据 JOIN</h3><ul>
<li>当然，可以在select\update和delete语句中使用mysql的join来联合多表查询</li>
<li>分类<ul>
<li>inner join(内连接，或等值连接)：获取两个表中字段匹配关系的记录。</li>
<li>left join(左连接)：获取左表所有记录，即使右表没有对应匹配的记录。</li>
<li>right join(右连接)：与 LEFT JOIN 相反，用于获取右表所有记录，即使左表没有对应匹配的记录。</li>
</ul>
</li>
<li>实例：</li>
</ul>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> RUNOOB;</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> tcount_tbl;</span><br><span class="line">+<span class="comment">---------------+--------------+</span></span><br><span class="line">| runoob_author | runoob_count |</span><br><span class="line">+<span class="comment">---------------+--------------+</span></span><br><span class="line">| 菜鸟教程  | 10           |</span><br><span class="line">| RUNOOB.COM    | 20           |</span><br><span class="line">| Google        | 22           |</span><br><span class="line">+<span class="comment">---------------+--------------+</span></span><br><span class="line">3 rows in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> runoob_tbl;</span><br><span class="line">+<span class="comment">-----------+---------------+---------------+-----------------+</span></span><br><span class="line">| runoob_id | runoob_title  | runoob_author | submission_date |</span><br><span class="line">+<span class="comment">-----------+---------------+---------------+-----------------+</span></span><br><span class="line">| 1         | 学习 PHP    | 菜鸟教程  | 2017-04-12      |</span><br><span class="line">| 2         | 学习 MySQL  | 菜鸟教程  | 2017-04-12      |</span><br><span class="line">| 3         | 学习 Java   | RUNOOB.COM    | 2015-05-01      |</span><br><span class="line">| 4         | 学习 Python | RUNOOB.COM    | 2016-03-06      |</span><br><span class="line">| 5         | 学习 C      | FK            | 2017-04-05      |</span><br><span class="line">+<span class="comment">-----------+---------------+---------------+-----------------+</span></span><br><span class="line">5 rows in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line">//使用<span class="keyword">inner</span> <span class="keyword">join</span> 来连接这两种表中所有的runoob_auther字段对应在tcount_tbl表对应的runoob_count字段：</span><br><span class="line"><span class="keyword">select</span> a.runoob_id, a.runoob_author, b.runoob_count <span class="keyword">from</span> runoob_tbl a <span class="keyword">inner</span> <span class="keyword">join</span> tcount_tbl b <span class="keyword">ON</span> a.runoob_author = b.runoob_auther;</span><br><span class="line">+<span class="comment">-------------+-----------------+----------------+</span></span><br><span class="line">| a.runoob_id | a.runoob_author | b.runoob_count |</span><br><span class="line">+<span class="comment">-------------+-----------------+----------------+</span></span><br><span class="line">| 1           | 菜鸟教程    | 10             |</span><br><span class="line">| 2           | 菜鸟教程    | 10             |</span><br><span class="line">| 3           | RUNOOB.COM      | 20             |</span><br><span class="line">| 4           | RUNOOB.COM      | 20             |</span><br><span class="line">+<span class="comment">-------------+-----------------+----------------+</span></span><br><span class="line">4 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">//以上生气了语句等价于：</span><br><span class="line"><span class="keyword">select</span> a.runoob_id, a.runoob_author, b.runoob_count <span class="keyword">from</span> runoob_tbl a, tcount_tbl b <span class="keyword">where</span> a.runoob_author = b.runoob_author;</span><br><span class="line">+<span class="comment">-------------+-----------------+----------------+</span></span><br><span class="line">| a.runoob_id | a.runoob_author | b.runoob_count |</span><br><span class="line">+<span class="comment">-------------+-----------------+----------------+</span></span><br><span class="line">| 1           | 菜鸟教程    | 10             |</span><br><span class="line">| 2           | 菜鸟教程    | 10             |</span><br><span class="line">| 3           | RUNOOB.COM      | 20             |</span><br><span class="line">| 4           | RUNOOB.COM      | 20             |</span><br><span class="line">+<span class="comment">-------------+-----------------+----------------+</span></span><br></pre></td></tr></table></figure>
<p>inner join : 取两个表的交集</p>
<p><img src="https://www.runoob.com/wp-content/uploads/2014/03/img_innerjoin.gif" alt="inner_join"></p>
<h4 id="Mysql-left-join"><a href="#Mysql-left-join" class="headerlink" title="Mysql left join"></a>Mysql left join</h4><ul>
<li>与join不同。left join 会读取左边数据表的全部数据，即使右边表无对应数据。</li>
<li>实例：(以runoob_tbl为左表，tcount_tbl为右表)</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> a.runoob_id, a.runoob_author, b.runoob_count <span class="keyword">from</span> runoob_tbl a <span class="keyword">left</span> <span class="keyword">join</span> tcount_tbl b <span class="keyword">on</span> a.runoob_author = b.runoob_author;</span><br><span class="line">+<span class="comment">-------------+-----------------+----------------+</span></span><br><span class="line">| a.runoob_id | a.runoob_author | b.runoob_count |</span><br><span class="line">+<span class="comment">-------------+-----------------+----------------+</span></span><br><span class="line">| 1           | 菜鸟教程    | 10             |</span><br><span class="line">| 2           | 菜鸟教程    | 10             |</span><br><span class="line">| 3           | RUNOOB.COM      | 20             |</span><br><span class="line">| 4           | RUNOOB.COM      | 20             |</span><br><span class="line">| 5           | FK              | NULL           |</span><br><span class="line">+<span class="comment">-------------+-----------------+----------------+</span></span><br></pre></td></tr></table></figure>
<ul>
<li>以上实例使用了left join，该语句会读取左边的数据表 runoob_tbl的所有选取的字段，即便右侧表tcount_tbl中没有对应的runoob_author字段。</li>
</ul>
<p><img src="https://www.runoob.com/wp-content/uploads/2014/03/img_leftjoin.gif" alt="left_join"></p>
<h4 id="mysql-right-join会读取右侧数据表的全部数据，即便左侧表无对应数据。"><a href="#mysql-right-join会读取右侧数据表的全部数据，即便左侧表无对应数据。" class="headerlink" title="mysql right join会读取右侧数据表的全部数据，即便左侧表无对应数据。"></a>mysql right join会读取右侧数据表的全部数据，即便左侧表无对应数据。</h4><ul>
<li>实例：</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">a.runoob_id, a.runoob_author, b.runoob_count FROM runoob_tbl a RIGHT JOIN tcount_tbl b ON a.runoob_author = b.runoob_author;</span><br><span class="line">+<span class="comment">-------------+-----------------+----------------+</span></span><br><span class="line">| a.runoob_id | a.runoob_author | b.runoob_count |</span><br><span class="line">+<span class="comment">-------------+-----------------+----------------+</span></span><br><span class="line">| 1           | 菜鸟教程    | 10             |</span><br><span class="line">| 2           | 菜鸟教程    | 10             |</span><br><span class="line">| 3           | RUNOOB.COM      | 20             |</span><br><span class="line">| 4           | RUNOOB.COM      | 20             |</span><br><span class="line">| NULL        | NULL            | 22             |</span><br><span class="line">+<span class="comment">-------------+-----------------+----------------+</span></span><br></pre></td></tr></table></figure>
<ul>
<li>以上实例中使用了 RIGHT JOIN，该语句会读取右边的数据表 tcount_tbl 的所有选取的字段数据，即便在左侧表 runoob_tbl 中没有对应的runoob_author 字段值。</li>
</ul>
<p><img src="https://www.runoob.com/wp-content/uploads/2014/03/img_rightjoin.gif" alt="right_join"></p>
<h3 id="mysql-null"><a href="#mysql-null" class="headerlink" title="mysql null"></a>mysql null</h3><ul>
<li>当select命令、where遇到NULL时，该命令可能无法正常工作。</li>
<li>为了处理这种情况，Mysql提供了三大运算法：<ul>
<li>is null :当列的值为null，此运算符返回true。</li>
<li>is not null ：当列的值不为null时，运算符返回true。</li>
<li>&lt;=&gt;:比较操作符（不同于=运算符），当比较的两个值为null时返回true。</li>
</ul>
</li>
<li>关于 NULL 的条件比较运算是比较特殊的。你不能使用 = NULL 或 != NULL 在列中查找 NULL 值。</li>
<li>在 MySQL 中，NULL 值与任何其它值的比较（即使是 NULL）永远返回 false，即 NULL = NULL 返回false 。</li>
<li>MySQL 中处理 NULL 使用 IS NULL 和 IS NOT NULL 运算符。</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * ,  columnName1+<span class="keyword">ifnull</span>(columnName2,<span class="number">0</span>) <span class="keyword">from</span> tableName;</span><br><span class="line">//columnName1，columnName2 为 int 型，当 columnName2 中，有值为 null 时，columnName1+columnName2=null， </span><br><span class="line">ifnull(columnName2,0) 把 columnName2 中 null 值转为 0。⚠️</span><br></pre></td></tr></table></figure>
<h3 id="mysql-正则表达式"><a href="#mysql-正则表达式" class="headerlink" title="mysql 正则表达式"></a>mysql 正则表达式</h3><ul>
<li>mysql可以通过LIKE…%来进行模糊匹配，mysql同样支持其他正则表达式的匹配，mysql中使用REGEXP操作符进行正则表达式匹配。</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">模式      | 描述</span><br><span class="line">^         | 匹配输入字符串的开始位置。如果设置了RegExp对象的Multiline属性，^也匹配'\n'或'\r'之后的位置。</span><br><span class="line">$         | 匹配输入字符串的结束位置。如果设置了RegExp 对象的 Multiline 属性，$ 也匹配 '\n' 或 '\r' 之前的位置。</span><br><span class="line">.         | 匹配除 "\n" 之外的任何单个字符。要匹配包括 '\n' 在内的任何字符，请使用象 '[.\n]' 的模式。</span><br><span class="line">[...]     | 字符集合。匹配所包含的任意一个字符。例如， '[abc]' 可以匹配 "plain" 中的 'a'。</span><br><span class="line">[^...&#125;    | 负值字符集合。匹配未包含的任意字符。例如， '[^abc]' 可以匹配 "plain" 中的'p'。</span><br><span class="line">p1|p2|p3  | 匹配 p1 或 p2 或 p3。例如，'z|food' 能匹配 "z" 或 "food"。'(z|f)ood' 则匹配 "zood" 或 "food"。</span><br><span class="line">*         | 匹配前面的子表达式零次或多次。例如，zo* 能匹配 "z" 以及 "zoo"。* 等价于&#123;0,&#125;.</span><br><span class="line">+         | 匹配前面的子表达式一次或多次。例如，'zo+' 能匹配 "zo" 以及 "zoo"，但不能匹配 "z"。+ 等价于 &#123;1,&#125;。</span><br><span class="line">&#123;n&#125;       | n 是一个非负整数。匹配确定的 n 次。例如，'o&#123;2&#125;' 不能匹配 "Bob" 中的 'o'，但是能匹配 "food" 中的两个 o。</span><br><span class="line">&#123;n,m&#125;     | m和n均为非负整数，其中你&lt;=m.最少匹配n次且最多匹配m次。</span><br></pre></td></tr></table></figure>
<ul>
<li>实例：</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">//查找name字段中以‘st’为开头的所有数据</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">name</span> <span class="keyword">from</span> person_tbl <span class="keyword">where</span> <span class="keyword">name</span> REGEXP <span class="string">'^st'</span>;</span><br><span class="line"></span><br><span class="line">//查找name字段以‘OK’为结尾的所有数据</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">name</span> <span class="keyword">from</span> person_tbl <span class="keyword">where</span> <span class="keyword">name</span> REGEXP <span class="string">'ok$'</span>;</span><br><span class="line"></span><br><span class="line">//查找name字段中包含'mar'字符串的所有数据：</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">name</span> <span class="keyword">FROM</span> person_tbl <span class="keyword">WHERE</span> <span class="keyword">name</span> REGEXP <span class="string">'mar'</span>;</span><br><span class="line"></span><br><span class="line">//查找name字段中以元音字符开头或以‘ok’字符结尾的所有数据：</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">name</span> <span class="keyword">from</span> person_tbl <span class="keyword">where</span> <span class="keyword">name</span> REGEXP <span class="string">'^[aeiou]|ok$'</span>;</span><br></pre></td></tr></table></figure>
<h3 id="mysql-事务"><a href="#mysql-事务" class="headerlink" title="mysql 事务"></a>mysql 事务</h3><ul>
<li>主要用于处理操作量大、复杂度高的数据。比如说，在人员管理系统中，删除一个人，你需要删除人员的基本资料，也需要删除和该人员有关的信息，如信箱、文章等，如此这些数据库操作语句就构成一个事务！<ul>
<li>只有使用innodb数据引擎的数据库或表才支持事务！</li>
<li>事务处理可以用来维护数据库的完整性，保证成批的sql语句要么全部执行，要么不执行。</li>
<li>事务用来管理insert、update、delete语句。</li>
</ul>
</li>
<li>事务要满足4个条件（ACID）：原子性（Atomicity，或称为不可分割性）、一致性（consistency）、隔离性（Isolation，又称独立性）、持久性（Durability）。<ul>
<li><em>原子性</em>：一个事务（transaction）中的所有操作，要么全部完成，要么全部不完成，不会结束在中间某个环节。事务在执行过程中发生错误，会被回滚（Rollback）到事务开始前的状态，就像这个事务从来没有执行过一样。</li>
<li><em>一致性</em>：在事务开始之前和事务结束以后，数据库的完整性没有被破坏。这表示写入的资料必须完全符合所有的预设规则，这包含资料的精确度、串联性以及后续数据可以自发性地完成预定的工作。</li>
<li><em>隔离性</em>:数据库允许多个并发事务同时对其数据进行读写和修改的能力，隔离性可以防止多个事务并发执行时由于交叉执行而导致数据的不一致。事务隔离分为不同级别，包括读未提交（Read uncommitted）、读提交（read committed）、可重复读（repeatable read）和串行化（Serializable）。</li>
<li><em>持久性</em>：事务处理结束后，对数据的修改就是永久的，即便系统故障也不会丢失。</li>
</ul>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">在 MySQL 命令行的默认设置下，事务都是自动提交的，即执行 SQL 语句后就会马上执行 <span class="keyword">COMMIT</span> 操作。因此要显式地开启一个事务务须使用命令 <span class="keyword">BEGIN</span> 或 <span class="keyword">START</span> <span class="keyword">TRANSACTION</span>，或者执行命令 <span class="keyword">SET</span> AUTOCOMMIT=<span class="number">0</span>，用来禁止使用当前会话的自动提交。</span><br><span class="line"><span class="string">``</span><span class="string">` </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  - 事务控制语句：</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">BEGIN 或 START TRANSACTION 显式地开启一个事务；</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">COMMIT 也可以使用 COMMIT WORK，不过二者是等价的。COMMIT 会提交事务，并使已对数据库进行的所有修改成为永久性的；</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">ROLLBACK 也可以使用 ROLLBACK WORK，不过二者是等价的。回滚会结束用户的事务，并撤销正在进行的所有未提交的修改；</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">SAVEPOINT identifier，SAVEPOINT 允许在事务中创建一个保存点，一个事务中可以有多个 SAVEPOINT；</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">RELEASE SAVEPOINT identifier 删除一个事务的保存点，当没有指定的保存点时，执行该语句会抛出一个异常；</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">ROLLBACK TO identifier 把事务回滚到标记点；</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">SET TRANSACTION 用来设置事务的隔离级别。InnoDB 存储引擎提供事务的隔离级别有READ UNCOMMITTED、READ COMMITTED、REPEATABLE READ 和 SERIALIZABLE。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  - 事务处理主要有两种方法：</span></span><br><span class="line"><span class="string">     - 1.用begin（开始一个事务）, rollback（事务回滚）, commit（事务确认）来实现</span></span><br><span class="line"><span class="string">     - 2.直接用set来改变mysql的自动提交模式：</span></span><br><span class="line"><span class="string">        * set autocommit=0 禁止自动提交</span></span><br><span class="line"><span class="string">        * set autocommit=1 开启自动提交</span></span><br><span class="line"><span class="string">  - 实例：(事务测试)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">`</span><span class="string">``</span><span class="keyword">sql</span></span><br><span class="line"><span class="keyword">use</span> RUNOOB;</span><br><span class="line">_&gt; database changed</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> runoob_transaction_test(<span class="keyword">id</span> <span class="built_in">int</span>(<span class="number">5</span>)) <span class="keyword">engine</span>=<span class="keyword">innodb</span>;</span><br><span class="line">_&gt; Query OK, 0 rows affected (0.04sec)</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> runoob_trancaction_test;</span><br><span class="line">_&gt; Empty set</span><br><span class="line"></span><br><span class="line"><span class="keyword">begin</span> <span class="comment">#开始事务</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> runoob_transaction_test <span class="keyword">value</span>(<span class="number">5</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> runoob_transaction_test <span class="keyword">value</span>(<span class="number">6</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">commit</span> <span class="comment">#提交事务</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> runoob_trancaction_test;</span><br><span class="line">_&gt; </span><br><span class="line">+<span class="comment">------+</span></span><br><span class="line">| id   |</span><br><span class="line">+<span class="comment">------+</span></span><br><span class="line">| 5    |</span><br><span class="line">| 6    |</span><br><span class="line">+<span class="comment">------+</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">begin</span>; <span class="comment">#开始事务</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> runoob_transaction_test <span class="keyword">values</span>(<span class="number">7</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">rollback</span>; <span class="comment">#回滚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> runoob_transaction_test; <span class="comment">#因为回滚所以数据没有插入</span></span><br><span class="line">_&gt;</span><br><span class="line">+<span class="comment">------+</span></span><br><span class="line">| id   |</span><br><span class="line">+<span class="comment">------+</span></span><br><span class="line">| 5    |</span><br><span class="line">| 6    |</span><br><span class="line">+<span class="comment">------+</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用保留点savepoint</span></span><br><span class="line"><span class="comment"># savepoint 是在数据库事务处理中实现“子事务”（subtransaction），也称为嵌套事务的方法。</span></span><br><span class="line"><span class="comment"># 事务可以回滚到 savepoint 而不影响 savepoint 创建前的变化, 不需要放弃整个事务。</span></span><br><span class="line"><span class="keyword">savepoint</span> savepoint_name;//声明一个<span class="keyword">savepoint</span></span><br><span class="line"><span class="keyword">rollback</span> <span class="keyword">to</span> <span class="keyword">savepoint</span>; //回滚到<span class="keyword">savepoint</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除 savepoint</span></span><br><span class="line"><span class="comment"># 保留点再事务处理完成（执行一条rollback或commit）后自动释放。</span></span><br><span class="line"><span class="keyword">release</span> <span class="keyword">savepoint</span> savepoint_name;//删除指定保留点</span><br></pre></td></tr></table></figure>
<h3 id="mysql-alter命令"><a href="#mysql-alter命令" class="headerlink" title="mysql alter命令"></a>mysql alter命令</h3><ul>
<li>当我们需要修改数据表名或者数据表字段时，需要使用alter命令</li>
<li>首先创建一张表：</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> testalter_tbl</span><br><span class="line">  -&gt;(</span><br><span class="line">  -&gt;i <span class="built_in">INT</span>,</span><br><span class="line">  -&gt;c <span class="built_in">CHAR</span>(<span class="number">1</span>)</span><br><span class="line">  -&gt;);</span><br><span class="line"><span class="keyword">show</span> <span class="keyword">columns</span> <span class="keyword">from</span> testalter_tbl;</span><br><span class="line">+<span class="comment">-------+---------+------+-----+---------+-------+</span></span><br><span class="line">| Field | Type    | Null | Key | Default | Extra |</span><br><span class="line">+<span class="comment">-------+---------+------+-----+---------+-------+</span></span><br><span class="line">| i     | int(11) | YES  |     | NULL    |       |</span><br><span class="line">| c     | char(1) | YES  |     | NULL    |       |</span><br><span class="line">+<span class="comment">-------+---------+------+-----+---------+-------+</span></span><br></pre></td></tr></table></figure>
<h4 id="删除，添加或修改字段"><a href="#删除，添加或修改字段" class="headerlink" title="删除，添加或修改字段"></a>删除，添加或修改字段</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 删除，添加或修改字段</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> testalter_tbl <span class="keyword">drop</span> i;</span><br><span class="line"><span class="comment"># 当数据表中剩余一个字段则无法使用drop来删除字段</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用add子句向数据表中添加列，如下实例：</span></span><br><span class="line"><span class="keyword">alter</span> tbale testalter_tbl <span class="keyword">add</span> i <span class="built_in">INT</span>;</span><br><span class="line"><span class="keyword">show</span> <span class="keyword">columns</span> <span class="keyword">from</span> testalter_tbl;</span><br><span class="line">+<span class="comment">-------+---------+------+-----+---------+-------+</span></span><br><span class="line">| Field | Type    | Null | Key | Default | Extra |</span><br><span class="line">+<span class="comment">-------+---------+------+-----+---------+-------+</span></span><br><span class="line">| c     | char(1) | YES  |     | NULL    |       |</span><br><span class="line">| i     | int(11) | YES  |     | NULL    |       |</span><br><span class="line">+<span class="comment">-------+---------+------+-----+---------+-------+</span></span><br></pre></td></tr></table></figure>
<ul>
<li>如果你需要指定新增字段的位置，可以使用MySQL提供的关键字 FIRST (设定位第一列)， AFTER 字段名（设定位于某个字段之后）。尝试以下 ALTER TABLE 语句, 在执行成功后，使用 SHOW COLUMNS 查看表结构的变化：</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> testalter_tbl <span class="keyword">DROP</span> i;</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> testalter_tbl <span class="keyword">ADD</span> i <span class="built_in">INT</span> <span class="keyword">FIRST</span>;</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> testalter_tbl <span class="keyword">DROP</span> i;</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> testalter_tbl <span class="keyword">ADD</span> i <span class="built_in">INT</span> <span class="keyword">AFTER</span> c;</span><br></pre></td></tr></table></figure>
<ul>
<li>FIRST 和 AFTER 关键字可用于 ADD 与 MODIFY 子句，所以如果你想重置数据表字段的位置就需要先使用 DROP 删除字段然后使用 ADD 来添加字段并设置位置。<h4 id="修改字段类型及名称"><a href="#修改字段类型及名称" class="headerlink" title="修改字段类型及名称"></a>修改字段类型及名称</h4></li>
<li>若需要修改字段类型及名称，你可以在alter命令中使用modify或change子句。</li>
<li>实例：</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 把字段 c 的类型从 CHAR(1) 改为 CHAR(10)</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> testalter_tbl <span class="keyword">modify</span> c <span class="built_in">char</span>(<span class="number">10</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用 CHANGE 子句, 语法有很大的不同。 在 CHANGE 关键字之后，紧跟着的是你要修改的字段名，然后指定新字段名及类型</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> testalter_tbl <span class="keyword">change</span> i j <span class="built_in">BIGINT</span>;</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> testalter_tbl <span class="keyword">change</span> j j <span class="built_in">INT</span>;</span><br></pre></td></tr></table></figure>
<h4 id="alter-table对NULL值和默认值的影响"><a href="#alter-table对NULL值和默认值的影响" class="headerlink" title="alter table对NULL值和默认值的影响"></a>alter table对NULL值和默认值的影响</h4><ul>
<li>当你修改字段时，你可以指定是否包含值或是否设置默认值</li>
<li>实例：</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 段 j 为 NOT NULL 且默认值为100 ,你不设置默认值，mysql会设置该字段为NULL。</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> testalter_table <span class="keyword">modify</span> j <span class="built_in">BIGINT</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改字段默认值</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> testalter_tbl <span class="keyword">alter</span> i <span class="keyword">set</span> defult <span class="number">1000</span>;</span><br><span class="line"><span class="keyword">show</span> <span class="keyword">columns</span> <span class="keyword">from</span> testalter_tbl;</span><br><span class="line">+<span class="comment">-------+---------+------+-----+---------+-------+</span></span><br><span class="line">| Field | Type    | Null | Key | Default | Extra |</span><br><span class="line">+<span class="comment">-------+---------+------+-----+---------+-------+</span></span><br><span class="line">| c     | char(1) | YES  |     | NULL    |       |</span><br><span class="line">| i     | int(11) | YES  |     | 1000    |       |</span><br><span class="line">+<span class="comment">-------+---------+------+-----+---------+-------+</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 也可以使用alter命令及drop子句来删除字段的默认值</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> testalter_tbl <span class="keyword">alter</span> i <span class="keyword">drop</span> defult;</span><br><span class="line"><span class="keyword">show</span> <span class="keyword">columns</span> <span class="keyword">from</span> testalter_tbl;</span><br><span class="line">+<span class="comment">-------+---------+------+-----+---------+-------+</span></span><br><span class="line">| Field | Type    | Null | Key | Default | Extra |</span><br><span class="line">+<span class="comment">-------+---------+------+-----+---------+-------+</span></span><br><span class="line">| c     | char(1) | YES  |     | NULL    |       |</span><br><span class="line">| i     | int(11) | YES  |     | NULL    |       |</span><br><span class="line">+<span class="comment">-------+---------+------+-----+---------+-------+</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改数据表类型，可以使用alter命令及type子句来完成。</span></span><br><span class="line">changing a table Type:</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> testalter_tbl <span class="keyword">ENGINE</span> = MYISAM;</span><br><span class="line">mysql&gt;  SHOW TABLE STATUS LIKE 'testalter_tbl'\G</span><br><span class="line">_&gt;</span><br><span class="line">*************************** 1. row ****************</span><br><span class="line">           Name: testalter_tbl</span><br><span class="line">           Type: MyISAM</span><br><span class="line">     Row_format: Fixed</span><br><span class="line">           Rows: 0</span><br><span class="line"> Avg_row_length: 0</span><br><span class="line">    Data_length: 0</span><br><span class="line">Max_data_length: 25769803775</span><br><span class="line">   Index_length: 1024</span><br><span class="line">      Data_free: 0</span><br><span class="line"> Auto_increment: NULL</span><br><span class="line">    Create_time: 2007-06-03 08:04:36</span><br><span class="line">    Update_time: 2007-06-03 08:04:36</span><br><span class="line">     Check_time: NULL</span><br><span class="line"> Create_options:</span><br><span class="line">        <span class="keyword">Comment</span>:</span><br></pre></td></tr></table></figure>
<h4 id="修改表名"><a href="#修改表名" class="headerlink" title="修改表名"></a>修改表名</h4><ul>
<li>若需要修改数据表名称，可以在alter table语句中使用rename子句来完成。</li>
<li>实例：</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> testalter_tbl <span class="keyword">rename</span> <span class="keyword">to</span> alter_tbl;</span><br></pre></td></tr></table></figure>
<ul>
<li>ALTER 命令还可以用来创建及删除MySQL数据表的索引，该功能我们会在接下来的章节中介绍。<h3 id="mysql-索引"><a href="#mysql-索引" class="headerlink" title="mysql 索引"></a>mysql 索引</h3></li>
<li>mysql索引的建立对于mysql的高效运行很重要，索引可以提高mysql的检索速度。</li>
<li>索引分单列索引和组合索引<ul>
<li>单列索引：即一个索引只包含单个列，一个表可以有多个单列索引，但这不是组合索引。</li>
<li>组合索引：即一个索引包含多个列。</li>
</ul>
</li>
<li>创建索引时，需要确保该索引是应用在sql查询语句的条件（一般作为where子句的条件）</li>
<li>实际上，索引也是一张表，该表保存了主键与索引字段，并指向实体表的记录。</li>
<li>优缺点：<ul>
<li>优点：大大提升查询速度</li>
<li>缺点：降低了更新表的速度，如对表进行INSERT、UPDATE、DELETE。因为更新表时，mysql不仅要保存数据，还要保存一下索引文件。若过多使用，会造成滥用。</li>
</ul>
</li>
<li>建立索引会占用磁盘空间的索引文件。<h4 id="普通索引"><a href="#普通索引" class="headerlink" title="普通索引"></a>普通索引</h4></li>
<li>最基本的索引，没有任何限制，创建方式：<ul>
<li>creat index indexname on mytable(length); </li>
<li>如果是CHAR，VARCHAR类型，length可以小于字段实际长度；如果是BLOB和TEXT类型，必须指定 length。<h5 id="修改表结构（添加索引）"><a href="#修改表结构（添加索引）" class="headerlink" title="修改表结构（添加索引）"></a>修改表结构（添加索引）</h5></li>
</ul>
</li>
<li>alter table tablename add index indexname(columnname);<h5 id="创建表的时候直接指定"><a href="#创建表的时候直接指定" class="headerlink" title="创建表的时候直接指定"></a>创建表的时候直接指定</h5></li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> mytable(</span><br><span class="line"><span class="keyword">id</span> <span class="built_in">INT</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">username <span class="built_in">VARCHAR</span>(<span class="number">16</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line"><span class="keyword">INDEX</span> [indexname] (username(<span class="keyword">length</span>))</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h5 id="删除索引的语法"><a href="#删除索引的语法" class="headerlink" title="删除索引的语法"></a>删除索引的语法</h5><ul>
<li>drop index [indexname] on mytable;</li>
</ul>
<h4 id="唯一索引"><a href="#唯一索引" class="headerlink" title="唯一索引"></a>唯一索引</h4><ul>
<li>与普通索引类似，不同的是：索引列的值必须唯一，但允许有空值。如果是组合索引，则列值的组合必须唯一。它一下几种创建方式：<h5 id="创建索引"><a href="#创建索引" class="headerlink" title="创建索引"></a>创建索引</h5></li>
<li>create unique index indexname on mytable(username(length));<h5 id="修改表结构"><a href="#修改表结构" class="headerlink" title="修改表结构"></a>修改表结构</h5></li>
<li>alter table mytable add unique <a href="username(length">indexname</a>);<h5 id="创建表的时候直接指定-1"><a href="#创建表的时候直接指定-1" class="headerlink" title="创建表的时候直接指定"></a>创建表的时候直接指定</h5></li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> mytable(  </span><br><span class="line"><span class="keyword">ID</span> <span class="built_in">INT</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>,    </span><br><span class="line">username <span class="built_in">VARCHAR</span>(<span class="number">16</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,  </span><br><span class="line"><span class="keyword">UNIQUE</span> [indexName] (username(<span class="keyword">length</span>))  </span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h4 id="使用alter命令添加和删除索引"><a href="#使用alter命令添加和删除索引" class="headerlink" title="使用alter命令添加和删除索引"></a>使用alter命令添加和删除索引</h4><ul>
<li>ALTER TABLE tbl_name ADD PRIMARY KEY (column_list): 该语句添加一个主键，这意味着索引值必须是唯一的，且不能为NULL。</li>
<li>ALTER TABLE tbl_name ADD UNIQUE index_name (column_list): 这条语句创建索引的值必须是唯一的（除了NULL外，NULL可能会出现多次）。</li>
<li>ALTER TABLE tbl_name ADD INDEX index_name (column_list): 添加普通索引，索引值可出现多次。</li>
<li>ALTER TABLE tbl_name ADD FULLTEXT index_name (column_list):该语句指定了索引为 FULLTEXT ，用于全文索引。<h4 id="使用alter命令添加和删除主键"><a href="#使用alter命令添加和删除主键" class="headerlink" title="使用alter命令添加和删除主键"></a>使用alter命令添加和删除主键</h4></li>
<li>主键只能作用在一个列上，添加主键索引时，需要确保主键默认不为空（NOT NULL）</li>
<li>实例：</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> testalter_tbl <span class="keyword">modify</span> i <span class="built_in">INT</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>;</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> testalter_tbl <span class="keyword">add</span> primary <span class="keyword">key</span> (i);</span><br></pre></td></tr></table></figure>
<ul>
<li>可以使用 ALTER 命令删除主键：<ul>
<li>ALTER TABLE testalter_tbl DROP PRIMARY KEY;</li>
</ul>
</li>
<li>删除主键时只需指定PRIMARY KEY，但在删除索引时，你必须知道索引名。</li>
<li>显示索引信息<ul>
<li>show index from table_name; \G</li>
</ul>
</li>
</ul>
<h3 id="mysql-临时表"><a href="#mysql-临时表" class="headerlink" title="mysql 临时表"></a>mysql 临时表</h3><ul>
<li>MySQL 临时表在我们需要保存一些临时数据时是非常有用的。临时表只在当前连接可见，当关闭连接时，Mysql会自动删除表并释放所有空间。</li>
<li>如果使用了其他MySQL客户端程序连接MySQL数据库服务器来创建临时表，那么只有在关闭客户端程序时才会销毁临时表，当然你也可以手动销毁。</li>
<li>实例：（以下展示了使用Mysql临时表的简单实例）</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TEMPORARY</span> <span class="keyword">TABLE</span> SalesSummary ( //关键字<span class="keyword">temporary</span></span><br><span class="line">    -&gt; product_name <span class="built_in">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span></span><br><span class="line">    -&gt; , total_sales <span class="built_in">DECIMAL</span>(<span class="number">12</span>,<span class="number">2</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">0.00</span></span><br><span class="line">    -&gt; , avg_unit_price <span class="built_in">DECIMAL</span>(<span class="number">7</span>,<span class="number">2</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">0.00</span></span><br><span class="line">    -&gt; , total_units_sold <span class="built_in">INT</span> <span class="keyword">UNSIGNED</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">0</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> SalesSummary</span><br><span class="line">    -&gt; (product_name, total_sales, avg_unit_price, total_units_sold)</span><br><span class="line">    -&gt; <span class="keyword">VALUES</span></span><br><span class="line">    -&gt; (<span class="string">'cucumber'</span>, <span class="number">100.25</span>, <span class="number">90</span>, <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> SalesSummary;</span><br><span class="line">+<span class="comment">--------------+-------------+----------------+------------------+</span></span><br><span class="line">| product_name | total_sales | avg_unit_price | total_units_sold |</span><br><span class="line">+<span class="comment">--------------+-------------+----------------+------------------+</span></span><br><span class="line">| cucumber     |      100.25 |          90.00 |                2 |</span><br><span class="line">+<span class="comment">--------------+-------------+----------------+------------------+</span></span><br></pre></td></tr></table></figure>
<ul>
<li>当你使用show tables命令显示数据表时，你将无法看到SalesSummary表。</li>
<li>如果你退出当前MySQL会话，再使用 SELECT命令来读取原先创建的临时表数据，那你会发现数据库中没有该表的存在，因为在你退出时该临时表已经被销毁了。</li>
<li>删除临时表<ul>
<li>drop table SalesSummary;</li>
</ul>
</li>
</ul>
<h3 id="MySQL-复制表"><a href="#MySQL-复制表" class="headerlink" title="MySQL 复制表"></a>MySQL 复制表</h3><ul>
<li>若需要完全复制MySQL的数据表，包括表的结构，索引，默认值等，仅仅使用create table … select命令，时无法实现的。</li>
<li>复制表的步骤：<ul>
<li>使用 SHOW CREATE TABLE 命令获取创建数据表(CREATE TABLE) 语句，该语句包含了原数据表的结构，索引等。</li>
<li>复制以下命令显示的SQL语句，修改数据表名，并执行SQL语句，通过以上命令 将完全的复制数据表结构。</li>
<li>如果你想复制表的内容，你就可以使用 INSERT INTO … SELECT 语句来实现。</li>
</ul>
</li>
<li>实例：</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.获取数据表的完整结构</span></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">create</span> <span class="keyword">table</span> runoob_tbl \G;</span><br><span class="line">_&gt;</span><br><span class="line">*************************** 1. row ***************************</span><br><span class="line">       Table: runoob_tbl</span><br><span class="line"><span class="keyword">Create</span> <span class="keyword">Table</span>: <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`runoob_tbl`</span> (</span><br><span class="line">  <span class="string">`runoob_id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> auto_increment,</span><br><span class="line">  <span class="string">`runoob_title`</span> <span class="built_in">varchar</span>(<span class="number">100</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">default</span> <span class="string">''</span>,</span><br><span class="line">  <span class="string">`runoob_author`</span> <span class="built_in">varchar</span>(<span class="number">40</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">default</span> <span class="string">''</span>,</span><br><span class="line">  <span class="string">`submission_date`</span> <span class="built_in">date</span> <span class="keyword">default</span> <span class="literal">NULL</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span>  (<span class="string">`runoob_id`</span>),</span><br><span class="line">  <span class="keyword">UNIQUE</span> <span class="keyword">KEY</span> <span class="string">`AUTHOR_INDEX`</span> (<span class="string">`runoob_author`</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> </span><br><span class="line"><span class="number">1</span> <span class="keyword">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="keyword">ERROR</span>:</span><br><span class="line"><span class="keyword">No</span> <span class="keyword">query</span> specified</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.修改sql语句的数据表名，并执行sql语句。</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> <span class="string">'clone_tbl'</span>(</span><br><span class="line">  -&gt; <span class="string">`runoob_id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> auto_increment,</span><br><span class="line">  -&gt; <span class="string">`runoob_title`</span> <span class="built_in">varchar</span>(<span class="number">100</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">default</span> <span class="string">''</span>,</span><br><span class="line">  -&gt; <span class="string">`runoob_author`</span> <span class="built_in">varchar</span>(<span class="number">40</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">default</span> <span class="string">''</span>,</span><br><span class="line">  -&gt; <span class="string">`submission_date`</span> <span class="built_in">date</span> <span class="keyword">default</span> <span class="literal">NULL</span>,</span><br><span class="line">  -&gt; PRIMARY <span class="keyword">KEY</span>  (<span class="string">`runoob_id`</span>),</span><br><span class="line">  -&gt; <span class="keyword">UNIQUE</span> <span class="keyword">KEY</span> <span class="string">`AUTHOR_INDEX`</span> (<span class="string">`runoob_author`</span>)</span><br><span class="line">-&gt; ) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span>;</span><br><span class="line">Query OK, 0 rows affected (1.80 sec)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.若要copy数据，可以使用insert into ... select语句来实现。</span></span><br><span class="line"> <span class="keyword">INSERT</span> <span class="keyword">INTO</span> clone_tbl (runoob_id,</span><br><span class="line">    -&gt;                        runoob_title,</span><br><span class="line">    -&gt;                        runoob_author,</span><br><span class="line">    -&gt;                        submission_date)</span><br><span class="line">    -&gt; <span class="keyword">SELECT</span> runoob_id,runoob_title,</span><br><span class="line">    -&gt;        runoob_author,submission_date</span><br><span class="line">    -&gt; <span class="keyword">FROM</span> runoob_tbl;</span><br><span class="line">Query OK, 3 rows affected (0.07 sec)</span><br><span class="line">Records: 3  Duplicates: 0  Warnings: 0</span><br></pre></td></tr></table></figure>
<h4 id="其他复制表的操作"><a href="#其他复制表的操作" class="headerlink" title="其他复制表的操作"></a>其他复制表的操作</h4><ul>
<li>CREATE TABLE targetTable LIKE sourceTable;</li>
<li><p>INSERT INTO targetTable SELECT * FROM sourceTable;</p>
</li>
<li><p>来给大家区分下mysql复制表的两种方式。</p>
<ul>
<li><p>第一、只复制表结构到新表</p>
<ul>
<li>create table 新表 select * from 旧表 where 1=2</li>
<li>或者</li>
<li>create table 新表 like 旧表 </li>
</ul>
</li>
<li><p>第二、复制表结构及数据到新表</p>
<ul>
<li>create table新表 select * from 旧表 </li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="Mysql-元数据"><a href="#Mysql-元数据" class="headerlink" title="Mysql 元数据"></a>Mysql 元数据</h3><ul>
<li>数据库和数据表的信息</li>
<li>查询结果信息</li>
<li>获取服务器元数据</li>
<li><a href="https://www.runoob.com/mysql/mysql-database-info.html" target="_blank" rel="noopener">详细介绍</a></li>
</ul>
<h3 id="MySql-序列使用"><a href="#MySql-序列使用" class="headerlink" title="MySql 序列使用"></a>MySql 序列使用</h3><ul>
<li>MySQL 序列是一组整数：1, 2, 3, …，由于一张数据表只能有一个字段自增主键， 如果你想实现其他字段也实现自动增加，就可以使用MySQL序列来实现。</li>
<li>使用 auto_increment</li>
<li>实例：</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> insect</span><br><span class="line">    -&gt; (</span><br><span class="line">    -&gt; <span class="keyword">id</span> <span class="built_in">INT</span> <span class="keyword">UNSIGNED</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">    -&gt; PRIMARY <span class="keyword">KEY</span> (<span class="keyword">id</span>),</span><br><span class="line">    -&gt; <span class="keyword">name</span> <span class="built_in">VARCHAR</span>(<span class="number">30</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>, <span class="comment"># type of insect</span></span><br><span class="line">    -&gt; <span class="built_in">date</span> <span class="built_in">DATE</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>, <span class="comment"># date collected</span></span><br><span class="line">    -&gt; origin <span class="built_in">VARCHAR</span>(<span class="number">30</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="comment"># where collected</span></span><br><span class="line">);</span><br><span class="line">Query OK, 0 rows affected (0.02 sec)</span><br></pre></td></tr></table></figure>
<ul>
<li>获取auto_increment值<ul>
<li>在MySQL的客户端中你可以使用 SQL中的LAST_INSERT_ID( ) 函数来获取最后的插入表中的自增列的值。<h4 id="重置序列"><a href="#重置序列" class="headerlink" title="重置序列"></a>重置序列</h4></li>
</ul>
</li>
<li>如果你删除了数据表中的多条记录，并希望对剩下数据的AUTO_INCREMENT列进行重新排列，那么你可以通过删除自增的列，然后重新添加来实现。 不过该操作要非常小心，如果在删除的同时又有新记录添加，有可能会出现数据混乱。</li>
</ul>
<h3 id="MySQL-处理重复数据"><a href="#MySQL-处理重复数据" class="headerlink" title="MySQL 处理重复数据"></a>MySQL 处理重复数据</h3><h4 id="防止表中出现重复数据"><a href="#防止表中出现重复数据" class="headerlink" title="防止表中出现重复数据"></a>防止表中出现重复数据</h4><ul>
<li>可以在数据表中设置指定的字段为primary key（主键）或者unique（唯一）索引来保证数据的唯一性。</li>
<li>实例：</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 下表无索引及主键，所以该表允许出现多条重复记录</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> person_tbl</span><br><span class="line">(</span><br><span class="line">    first_name <span class="built_in">CHAR</span>(<span class="number">20</span>),</span><br><span class="line">    last_name <span class="built_in">CHAR</span>(<span class="number">20</span>),</span><br><span class="line">    sex <span class="built_in">CHAR</span>(<span class="number">10</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果你想设置表中字段 first_name，last_name 数据不能重复，你可以设置双主键模式来设置数据的唯一性， 如果你设置了双主键，那么那个键的默认值不能为 NULL，可设置为 NOT NULL。</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> person_tbl(</span><br><span class="line">  first_name <span class="built_in">CHAR</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  last_name <span class="built_in">CHAR</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  sex <span class="built_in">CHAR</span>(<span class="number">10</span>),</span><br><span class="line">  primary <span class="keyword">key</span> (last_name, first_name)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果我们设置了唯一索引，那么在插入重复数据时，SQL 语句将无法执行成功,并抛出错。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># INSERT IGNORE INTO 与 INSERT INTO 的区别就是 INSERT IGNORE 会忽略数据库中已经存在的数据，如果数据库没有数据，就插入新的数据，如果有数据的话就跳过这条数据。这样就可以保留数据库中已经存在数据，达到在间隙中插入数据的目的。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 以下实例使用了 INSERT IGNORE INTO，执行后不会出错，也不会向数据表中插入重复数据：</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">IGNORE</span> <span class="keyword">INTO</span> person_tbl (last_name, first_name)</span><br><span class="line">    -&gt; <span class="keyword">VALUES</span>( <span class="string">'Jay'</span>, <span class="string">'Thomas'</span>);</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">IGNORE</span> <span class="keyword">INTO</span> person_tbl (last_name, first_name)</span><br><span class="line">    -&gt; <span class="keyword">VALUES</span>( <span class="string">'Jay'</span>, <span class="string">'Thomas'</span>);</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line"><span class="comment"># INSERT IGNORE INTO 当插入数据时，在设置了记录的唯一性后，如果插入重复数据，将不返回错误，只以警告形式返回。 而 REPLACE INTO 如果存在 primary 或 unique 相同的记录，则先删除掉。再插入新记录。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加unique索引确保数据唯一性；</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> person_tbl</span><br><span class="line">(</span><br><span class="line">   first_name <span class="built_in">CHAR</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">   last_name <span class="built_in">CHAR</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">   sex <span class="built_in">CHAR</span>(<span class="number">10</span>),</span><br><span class="line">   <span class="keyword">UNIQUE</span> (last_name, first_name)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h4 id="统计重复数据"><a href="#统计重复数据" class="headerlink" title="统计重复数据"></a>统计重复数据</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">COUNT</span>(*) <span class="keyword">as</span> repetitions, last_name, first_name</span><br><span class="line">    -&gt; <span class="keyword">FROM</span> person_tbl</span><br><span class="line">    -&gt; <span class="keyword">GROUP</span> <span class="keyword">BY</span> last_name, first_name</span><br><span class="line">    -&gt; <span class="keyword">HAVING</span> repetitions &gt; <span class="number">1</span>;</span><br></pre></td></tr></table></figure>
<h4 id="过滤重复数据"><a href="#过滤重复数据" class="headerlink" title="过滤重复数据"></a>过滤重复数据</h4><ul>
<li>如果你需要读取不重复的数据可以在 SELECT 语句中使用 DISTINCT 关键字来过滤重复数据。</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT DISTINCT last_name, first_name</span><br><span class="line">    -&gt; FROM person_tbl;</span><br></pre></td></tr></table></figure>
<ul>
<li>你也可以使用 GROUP BY 来读取数据表中不重复的数据：</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT last_name, first_name</span><br><span class="line">    -&gt; FROM person_tbl</span><br><span class="line">    -&gt; GROUP BY (last_name, first_name);</span><br></pre></td></tr></table></figure>
<h4 id="删除重复数据"><a href="#删除重复数据" class="headerlink" title="删除重复数据"></a>删除重复数据</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tmp <span class="keyword">select</span> lat_name, first_name, sex <span class="keyword">from</span> person_tbl <span class="keyword">group</span> <span class="keyword">by</span> (last_name, first_name, sex);</span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> person_tbl;</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> tmp <span class="keyword">rename</span> <span class="keyword">to</span> person</span><br></pre></td></tr></table></figure>
<ul>
<li>或者</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 当然你也可以在数据表中添加 INDEX（索引） 和 PRIMAY KEY（主键）这种简单的方法来删除表中的重复记录。方法如下：</span></span><br><span class="line"></span><br><span class="line">mysql&gt; ALTER IGNORE TABLE person_tbl</span><br><span class="line">    -&gt; ADD PRIMARY KEY (last_name, first_name);</span><br></pre></td></tr></table></figure>
<h3 id="MySQL-及SQL注入"><a href="#MySQL-及SQL注入" class="headerlink" title="MySQL 及SQL注入"></a>MySQL 及SQL注入</h3><ul>
<li>通过网页获取用户输入的数据并将其插入一个MySQL数据库，那么就有可能发生SQL注入安全的问题。</li>
<li>所谓SQL注入，就是通过把SQL命令插入到Web表单递交或输入域名或页面请求的查询字符串，最终达到欺骗服务器执行恶意的SQL命令。</li>
<li>我们永远不要信任用户的输入，我们必须认定用户输入的数据都是不安全的，我们都需要对用户输入的数据进行过滤处理。<br><a href="https://www.runoob.com/mysql/mysql-sql-injection.html" target="_blank" rel="noopener">SQL注入</a></li>
</ul>
<h3 id="MySQL-导出数据"><a href="#MySQL-导出数据" class="headerlink" title="MySQL 导出数据"></a>MySQL 导出数据</h3><ul>
<li>使用select … into outfile语句导出数据</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> runoob_tbl <span class="keyword">into</span> <span class="keyword">OUTFILE</span> <span class="string">'tmp/runob.txt'</span>;</span><br><span class="line"><span class="comment"># 可以通过命令选项来设置数据输出的指定格式。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 导出为csv格式</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> passwd <span class="keyword">into</span> <span class="keyword">outfile</span> <span class="string">'/tmp/runoob.txt'</span></span><br><span class="line">  -&gt; <span class="keyword">fields</span> <span class="keyword">terminated</span> <span class="keyword">by</span> <span class="string">','</span> <span class="keyword">enclosed</span> <span class="keyword">by</span> <span class="string">""</span></span><br><span class="line">  -&gt; <span class="keyword">lines</span> <span class="keyword">terminated</span> <span class="keyword">by</span> <span class="string">'\r\n'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 生成一个文件，各值用逗号隔开。这种格式可以被许多程序使用。</span></span><br><span class="line"><span class="keyword">SELECT</span> a,b,a+b <span class="keyword">INTO</span> <span class="keyword">OUTFILE</span> <span class="string">'/tmp/result.text'</span></span><br><span class="line">  -&gt; <span class="keyword">FIELDS</span> <span class="keyword">TERMINATED</span> <span class="keyword">BY</span> <span class="string">','</span> <span class="keyword">OPTIONALLY</span> <span class="keyword">ENCLOSED</span> <span class="keyword">BY</span> <span class="string">'"'</span></span><br><span class="line">  -&gt; <span class="keyword">LINES</span> <span class="keyword">TERMINATED</span> <span class="keyword">BY</span> <span class="string">'\n'</span></span><br><span class="line">  -&gt; <span class="keyword">FROM</span> test_table;</span><br></pre></td></tr></table></figure>
<ul>
<li>导出sql格式的数据</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导出数据表</span></span><br><span class="line">$ mysqldump -u root -p RUNOOB runoob_tbl &gt; dump.txt</span><br><span class="line">password ******</span><br><span class="line"></span><br><span class="line"><span class="comment"># 导出整个数据库的数据</span></span><br><span class="line">$ mysqldump -u root -p RUNOOB &gt; database_dump.txt</span><br><span class="line">password ******</span><br><span class="line"></span><br><span class="line"><span class="comment"># 备份所有数据库</span></span><br><span class="line">$ mysqldump -u root -p <span class="comment">--all-databases &gt; database_dump.txt</span></span><br><span class="line">password ******</span><br></pre></td></tr></table></figure>
<ul>
<li><a href="https://www.runoob.com/mysql/mysql-database-export.html" target="_blank" rel="noopener">学习资源</a></li>
</ul>
<h3 id="mysql-导入数据"><a href="#mysql-导入数据" class="headerlink" title="mysql 导入数据"></a>mysql 导入数据</h3><ul>
<li><a href="https://www.runoob.com/mysql/mysql-database-import.html" target="_blank" rel="noopener">学习资源</a></li>
<li>mysql命令</li>
<li>source命令</li>
<li>使用load data导入数据</li>
<li>使用mysqlimport导入数据</li>
</ul>
<h3 id="MySQL-函数"><a href="#MySQL-函数" class="headerlink" title="MySQL 函数"></a>MySQL 函数</h3><ul>
<li>mysql内置了许多函数</li>
<li><a href="https://www.runoob.com/mysql/mysql-functions.html" target="_blank" rel="noopener">查询使用方法及用途</a></li>
</ul>
<h3 id="MySQL-运算法"><a href="#MySQL-运算法" class="headerlink" title="MySQL 运算法"></a>MySQL 运算法</h3><ul>
<li>算术运算符</li>
<li>比较运算符</li>
<li>逻辑运算符</li>
<li>位运算符</li>
<li><a href="https://www.runoob.com/mysql/mysql-operator.html" target="_blank" rel="noopener">学习地址</a></li>
<li><img src="https://www.runoob.com/wp-content/uploads/2018/11/1011652-20170416163043227-1936139924.png" alt="运算法优先级"></li>
</ul>
<h2 id="MySQL教程学习告一段落！日后在实战中加强运用和实践！"><a href="#MySQL教程学习告一段落！日后在实战中加强运用和实践！" class="headerlink" title="MySQL教程学习告一段落！日后在实战中加强运用和实践！"></a>MySQL教程学习告一段落！日后在实战中加强运用和实践！</h2><blockquote>
<p>学习源<a href="https://runoob.com" target="_blank" rel="noopener">Runoob</a>,本文为学习笔记！</p>
</blockquote>

                
                <hr>
                <!-- Pager -->
                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/2018/12/16/other-4-2018-12-16-Java基础知识/" data-toggle="tooltip" data-placement="top" title="Java基础知识">&larr; Previous Post</a>
                    </li>
                    
                    
                    <li class="next">
                        <a href="/2018/12/04/web跨端融合方案浅析/" data-toggle="tooltip" data-placement="top" title="web跨端融合方案浅析">Next Post &rarr;</a>
                    </li>
                    
                </ul>

                <!-- tip start -->
                

                
                <div class="comment_notes">
                    <p>
                        study well and make progress every day; study well and progress every day; study hard and make progress every day.
                    </p>
                </div>
                
                <!-- tip end -->

                <!-- Music start-->
                
                <!-- Music end -->

                <!-- Sharing -->
                
                <div class="social-share"  data-wechat-qrcode-helper="" align="center"></div>
                <!--  css & js -->
                <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/css/share.min.css">
                <script src="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script>
                
                <!-- Sharing -->

                <!-- gitment start -->
                
                <!-- gitment end -->

                <!-- 来必力City版安装代码 -->
                
                <!-- City版安装代码已完成 -->

                <!-- disqus comment start -->
                
                <!-- disqus comment end -->
            </div>
            
            <!-- Tabe of Content -->
            <!-- Table of Contents -->

    
      
        <aside id="sidebar">
          <div id="toc" class="toc-article">
          <strong class="toc-title">Contents</strong>
          
            
              <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#什么是数据库？"><span class="toc-nav-number">1.</span> <span class="toc-nav-text">什么是数据库？</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#RDBMS术语"><span class="toc-nav-number">2.</span> <span class="toc-nav-text">RDBMS术语</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#管理MySQL的命令"><span class="toc-nav-number">3.</span> <span class="toc-nav-text">管理MySQL的命令</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#MySqL数据库操作"><span class="toc-nav-number">4.</span> <span class="toc-nav-text">MySqL数据库操作</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#MySQL数据类型"><span class="toc-nav-number">5.</span> <span class="toc-nav-text">MySQL数据类型</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#数值、日期-时间、字符串（字符）类型。"><span class="toc-nav-number">5.1.</span> <span class="toc-nav-text">数值、日期&#x2F;时间、字符串（字符）类型。</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#时间-时间类型"><span class="toc-nav-number">5.2.</span> <span class="toc-nav-text">时间&#x2F;时间类型</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#字符串类型"><span class="toc-nav-number">5.3.</span> <span class="toc-nav-text">字符串类型</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#数据类型的属性"><span class="toc-nav-number">5.4.</span> <span class="toc-nav-text">数据类型的属性</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#mysql表操作"><span class="toc-nav-number">6.</span> <span class="toc-nav-text">mysql表操作</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#MySQL-where-子句，有条件地从表中选取数据，可将where字句添加到select语句中"><span class="toc-nav-number">7.</span> <span class="toc-nav-text">MySQL where 子句，有条件地从表中选取数据，可将where字句添加到select语句中</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#UPDATE-更新"><span class="toc-nav-number">8.</span> <span class="toc-nav-text">UPDATE 更新</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#Delete-语句"><span class="toc-nav-number">9.</span> <span class="toc-nav-text">Delete 语句</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#LIKE-子句"><span class="toc-nav-number">10.</span> <span class="toc-nav-text">LIKE 子句</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#MySQL-UNION操作符"><span class="toc-nav-number">11.</span> <span class="toc-nav-text">MySQL UNION操作符</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#排序-order-by"><span class="toc-nav-number">12.</span> <span class="toc-nav-text">排序 order by</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#Group-by-根据一个或多个列对结果集进行分组。在分组的列上我们可以使用-COUNT-SUM-AVG-等函数。"><span class="toc-nav-number">13.</span> <span class="toc-nav-text">Group by 根据一个或多个列对结果集进行分组。在分组的列上我们可以使用 COUNT, SUM, AVG,等函数。</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#Mysql-连接的使用，作用从多张数据表中读取数据-JOIN"><span class="toc-nav-number">14.</span> <span class="toc-nav-text">Mysql 连接的使用，作用从多张数据表中读取数据 JOIN</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#Mysql-left-join"><span class="toc-nav-number">14.1.</span> <span class="toc-nav-text">Mysql left join</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#mysql-right-join会读取右侧数据表的全部数据，即便左侧表无对应数据。"><span class="toc-nav-number">14.2.</span> <span class="toc-nav-text">mysql right join会读取右侧数据表的全部数据，即便左侧表无对应数据。</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#mysql-null"><span class="toc-nav-number">15.</span> <span class="toc-nav-text">mysql null</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#mysql-正则表达式"><span class="toc-nav-number">16.</span> <span class="toc-nav-text">mysql 正则表达式</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#mysql-事务"><span class="toc-nav-number">17.</span> <span class="toc-nav-text">mysql 事务</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#mysql-alter命令"><span class="toc-nav-number">18.</span> <span class="toc-nav-text">mysql alter命令</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#删除，添加或修改字段"><span class="toc-nav-number">18.1.</span> <span class="toc-nav-text">删除，添加或修改字段</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#修改字段类型及名称"><span class="toc-nav-number">18.2.</span> <span class="toc-nav-text">修改字段类型及名称</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#alter-table对NULL值和默认值的影响"><span class="toc-nav-number">18.3.</span> <span class="toc-nav-text">alter table对NULL值和默认值的影响</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#修改表名"><span class="toc-nav-number">18.4.</span> <span class="toc-nav-text">修改表名</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#mysql-索引"><span class="toc-nav-number">19.</span> <span class="toc-nav-text">mysql 索引</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#普通索引"><span class="toc-nav-number">19.1.</span> <span class="toc-nav-text">普通索引</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#修改表结构（添加索引）"><span class="toc-nav-number">19.1.1.</span> <span class="toc-nav-text">修改表结构（添加索引）</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#创建表的时候直接指定"><span class="toc-nav-number">19.1.2.</span> <span class="toc-nav-text">创建表的时候直接指定</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#删除索引的语法"><span class="toc-nav-number">19.1.3.</span> <span class="toc-nav-text">删除索引的语法</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#唯一索引"><span class="toc-nav-number">19.2.</span> <span class="toc-nav-text">唯一索引</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#创建索引"><span class="toc-nav-number">19.2.1.</span> <span class="toc-nav-text">创建索引</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#修改表结构"><span class="toc-nav-number">19.2.2.</span> <span class="toc-nav-text">修改表结构</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#创建表的时候直接指定-1"><span class="toc-nav-number">19.2.3.</span> <span class="toc-nav-text">创建表的时候直接指定</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#使用alter命令添加和删除索引"><span class="toc-nav-number">19.3.</span> <span class="toc-nav-text">使用alter命令添加和删除索引</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#使用alter命令添加和删除主键"><span class="toc-nav-number">19.4.</span> <span class="toc-nav-text">使用alter命令添加和删除主键</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#mysql-临时表"><span class="toc-nav-number">20.</span> <span class="toc-nav-text">mysql 临时表</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#MySQL-复制表"><span class="toc-nav-number">21.</span> <span class="toc-nav-text">MySQL 复制表</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#其他复制表的操作"><span class="toc-nav-number">21.1.</span> <span class="toc-nav-text">其他复制表的操作</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#Mysql-元数据"><span class="toc-nav-number">22.</span> <span class="toc-nav-text">Mysql 元数据</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#MySql-序列使用"><span class="toc-nav-number">23.</span> <span class="toc-nav-text">MySql 序列使用</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#重置序列"><span class="toc-nav-number">23.1.</span> <span class="toc-nav-text">重置序列</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#MySQL-处理重复数据"><span class="toc-nav-number">24.</span> <span class="toc-nav-text">MySQL 处理重复数据</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#防止表中出现重复数据"><span class="toc-nav-number">24.1.</span> <span class="toc-nav-text">防止表中出现重复数据</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#统计重复数据"><span class="toc-nav-number">24.2.</span> <span class="toc-nav-text">统计重复数据</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#过滤重复数据"><span class="toc-nav-number">24.3.</span> <span class="toc-nav-text">过滤重复数据</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#删除重复数据"><span class="toc-nav-number">24.4.</span> <span class="toc-nav-text">删除重复数据</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#MySQL-及SQL注入"><span class="toc-nav-number">25.</span> <span class="toc-nav-text">MySQL 及SQL注入</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#MySQL-导出数据"><span class="toc-nav-number">26.</span> <span class="toc-nav-text">MySQL 导出数据</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#mysql-导入数据"><span class="toc-nav-number">27.</span> <span class="toc-nav-text">mysql 导入数据</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#MySQL-函数"><span class="toc-nav-number">28.</span> <span class="toc-nav-text">MySQL 函数</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#MySQL-运算法"><span class="toc-nav-number">29.</span> <span class="toc-nav-text">MySQL 运算法</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#MySQL教程学习告一段落！日后在实战中加强运用和实践！"><span class="toc-nav-number"></span> <span class="toc-nav-text">MySQL教程学习告一段落！日后在实战中加强运用和实践！</span></a>
            
          
          </div>
        </aside>
      
    

                
            <!-- Sidebar Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                sidebar-container">

                <!-- Featured Tags -->
                
                <section>
                    <!-- no hr -->
                    <h5><a href="/tags/">FEATURED TAGS</a></h5>
                    <div class="tags">
                       
                          <a class="tag" href="/tags/#MySQL" title="MySQL">MySQL</a>
                        
                    </div>
                </section>
                

                <!-- Friends Blog -->
                
                <hr>
                <h5>FRIENDS</h5>
                <ul class="list-inline">

                    
                        <li><a href="https://blog.csdn.net/fenglepeng" target="_blank">Feng Lepeng&#39;s CSDN</a></li>
                    
                </ul>
                
            </div>
        </div>
    </div>
</article>




<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>
<!-- anchor-js, Doc:http://bryanbraun.github.io/anchorjs/ -->
<script>
    async("https://cdn.bootcss.com/anchor-js/1.1.1/anchor.min.js",function(){
        anchors.options = {
          visible: 'hover',
          placement: 'left',
          icon: 'ℬ'
        };
        anchors.add().remove('.intro-header h1').remove('.subheading').remove('.sidebar-container h5');
    })
</script>


<style  type="text/css">
    /* place left on bigger screen */
    @media all and (min-width: 800px) {
        .anchorjs-link{
            position: absolute;
            left: -0.75em;
            font-size: 1.1em;
            margin-top : -0.1em;
        }
    }
</style>



    <!-- Footer -->
    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">

                

                

                

                

                

                

                

                </ul>
                <p class="copyright text-muted">
                    Copyright &copy;
                    <a href="https://beian.miit.gov.cn/" target="_blank" rel="noopener">京ICP备18055501号-2</a>;
                    Feng Lepeng 2022
                    <br>
                    Powered by 
                    <a href="https://github.com/dusign/hexo-theme-snail" target="_blank" rel="noopener">
                        <i>hexo-theme-snail</i>
                    </a> | 
                    <iframe name="star" style="margin-left: 2px; margin-bottom:-5px;" frameborder="0" scrolling="0"
                        width="100px" height="20px"
                        src="https://ghbtns.com/github-btn.html?user=flepeng&repo=hexo-theme-lp&type=star">
                    </iframe>
                </p>
            </div>
        </div>
    </div>

</footer>

<!-- jQuery -->

<script src="/js/jquery.min.js"></script>


<!-- Bootstrap Core JavaScript -->

<script src="/js/bootstrap.min.js"></script>


<!-- Custom Theme JavaScript -->

<script src="/js/hux-blog.min.js"></script>


<!-- Search -->

<script src="/js/search.js"></script>


<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>


<!-- jquery.tagcloud.js -->
<script>
    // only load tagcloud.js in tag.html
    if($('#tag_cloud').length !== 0){
        async("https://flepeng.github.io/js/jquery.tagcloud.js",function(){
            $.fn.tagcloud.defaults = {
                //size: {start: 1, end: 1, unit: 'em'},
                color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>

<!--fastClick.js -->
<script>
    async("https://cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>


<!-- Google Analytics -->


<script>
    // dynamic User by Hux
    var _gaId = 'UA-XXXXXXXX-X';
    var _gaDomain = 'yoursite';

    // Originial
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', _gaId, _gaDomain);
    ga('send', 'pageview');
</script>




<!-- Baidu Tongji -->


<!-- Search -->

    <script type="text/javascript">      
        var search_path = "search.xml";
        if (search_path.length == 0) {
            search_path = "search.xml";
        }
    var path = "/" + search_path;
    searchFunc(path, 'local-search-input', 'local-search-result');
    </script>


<!-- busuanzi -->
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>






	<a id="rocket" href="#top" class=""></a>
	<script type="text/javascript" src="/js/totop.js?v=1.0.0" async=""></script>
    <script type="text/javascript" src="/js/toc.js?v=1.0.0" async=""></script>

    
        <!-- background effects line -->
        

        
            <script type="text/javascript" src="/js/mouse-click.js" content='[&quot;🌱&quot;,&quot;just do it&quot;,&quot;🍀&quot;]' color='[&quot;rgb(121,93,179)&quot; ,&quot;rgb(76,180,231)&quot; ,&quot;rgb(184,90,154)&quot;]'></script>
        

        <!-- background effects end -->
    

    <!--<script size="50" alpha='0.3' zIndex="-999" src="/js/ribbonStatic.js"></script>-->
    
        <script src="/js/ribbonDynamic.js"></script>
    
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<!--<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>-->
</body>

</html>
